"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/register/route";
exports.ids = ["app/api/register/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fregister%2Froute&page=%2Fapi%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fregister%2Froute.ts&appDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fregister%2Froute&page=%2Fapi%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fregister%2Froute.ts&appDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_arbenlila_development_shfmk_association_apps_web_app_api_register_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/register/route.ts */ \"(rsc)/./app/api/register/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/register/route\",\n        pathname: \"/api/register\",\n        filename: \"route\",\n        bundlePath: \"app/api/register/route\"\n    },\n    resolvedPagePath: \"/Users/arbenlila/development/shfmk-association/apps/web/app/api/register/route.ts\",\n    nextConfigOutput,\n    userland: _Users_arbenlila_development_shfmk_association_apps_web_app_api_register_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/register/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZWdpc3RlciUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmVnaXN0ZXIlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyZWdpc3RlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFyYmVubGlsYSUyRmRldmVsb3BtZW50JTJGc2hmbWstYXNzb2NpYXRpb24lMkZhcHBzJTJGd2ViJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFyYmVubGlsYSUyRmRldmVsb3BtZW50JTJGc2hmbWstYXNzb2NpYXRpb24lMkZhcHBzJTJGd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpQztBQUM5RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8/MzgzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYXJiZW5saWxhL2RldmVsb3BtZW50L3NoZm1rLWFzc29jaWF0aW9uL2FwcHMvd2ViL2FwcC9hcGkvcmVnaXN0ZXIvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JlZ2lzdGVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVnaXN0ZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3JlZ2lzdGVyL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2FyYmVubGlsYS9kZXZlbG9wbWVudC9zaGZtay1hc3NvY2lhdGlvbi9hcHBzL3dlYi9hcHAvYXBpL3JlZ2lzdGVyL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yZWdpc3Rlci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fregister%2Froute&page=%2Fapi%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fregister%2Froute.ts&appDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/register/route.ts":
/*!***********************************!*\
  !*** ./app/api/register/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/../../.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/../../.pnpm/zod@3.25.76/node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_fees__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/fees */ \"(rsc)/./lib/fees.ts\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _shfmk_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @shfmk/shared */ \"(rsc)/../../packages/shared/src/index.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./lib/env.ts\");\n/* harmony import */ var _lib_qr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/qr */ \"(rsc)/./lib/qr.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./lib/email.ts\");\n\n\n\n\n\n\n\n\n\n// Schema for validating the request body\nconst inputSchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n    fullName: zod__WEBPACK_IMPORTED_MODULE_8__.string().min(2, \"Name is required\"),\n    email: zod__WEBPACK_IMPORTED_MODULE_8__.string().email(\"Invalid email\"),\n    phone: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n    institution: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n    category: zod__WEBPACK_IMPORTED_MODULE_8__[\"enum\"]([\n        \"member\",\n        \"non_member\",\n        \"student\"\n    ])\n});\nasync function POST(req) {\n    try {\n        // 1. Validate environment and request body\n        (0,_lib_env__WEBPACK_IMPORTED_MODULE_5__.ensureServerEnv)();\n        const body = await req.json();\n        const input = inputSchema.parse(body);\n        // 2. Get conference details\n        const conference = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_3__.getConferenceBySlug)();\n        if (!conference) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: false,\n                error: \"Konferenca nuk u gjet\",\n                code: \"CONF_NOT_FOUND\"\n            }, {\n                status: 404\n            });\n        }\n        // 3. Check for duplicates and registration status\n        const existingRegistration = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_3__.getRegistrationByEmail)(input.email, conference.id);\n        if (existingRegistration) {\n            try {\n                // If the user is already registered, resend the confirmation email as a courtesy.\n                const qrDataUrl = await (0,_lib_qr__WEBPACK_IMPORTED_MODULE_6__.createQrDataUrl)(existingRegistration.qr_token);\n                await (0,_lib_email__WEBPACK_IMPORTED_MODULE_7__.sendConfirmationEmail)({\n                    to: existingRegistration.email,\n                    fullName: existingRegistration.full_name,\n                    qrDataUrl,\n                    conferenceName: conference.name,\n                    conferenceLocation: conference.location,\n                    conferenceStartDate: conference.start_date,\n                    conferenceEndDate: conference.end_date,\n                    category: existingRegistration.category,\n                    fee: existingRegistration.fee_amount,\n                    currency: existingRegistration.currency\n                });\n                // On success, let the user know the email was resent.\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ok: true,\n                    message: \"Ky email tashm\\xeb \\xebsht\\xeb i regjistruar. Sapo jua rid\\xebrguam email-in e konfirmimit.\",\n                    code: \"ALREADY_REGISTERED_RESENT\"\n                }, {\n                    status: 200\n                });\n            } catch (emailError) {\n                console.error(\"Failed to resend confirmation email on duplicate registration:\", emailError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ok: false,\n                    error: \"Email-i juaj \\xebsht\\xeb i regjistruar, por d\\xebrgimi i email-it t\\xeb konfirmimit d\\xebshtoi. Ju lutemi kontaktoni organizatorin.\",\n                    code: \"EMAIL_SEND_FAILED\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        (0,_lib_fees__WEBPACK_IMPORTED_MODULE_2__.ensureRegistrationIsOpen)(conference);\n        const registeredCount = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_3__.countRegistrations)(conference.id);\n        (0,_lib_fees__WEBPACK_IMPORTED_MODULE_2__.ensureCapacity)(registeredCount, conference);\n        // 4. Pre-generate ID and QR token (THE FIX)\n        const registrationId = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        const fee = (0,_lib_fees__WEBPACK_IMPORTED_MODULE_2__.calculateFee)(conference, input.category);\n        const payload = {\n            sub: registrationId,\n            name: input.fullName,\n            cat: input.category,\n            conf: conference.slug,\n            fee,\n            cur: conference.currency\n        };\n        // The signRegistrationToken function now becomes a critical part of the flow\n        const { token, generated, publicKeyPem } = await (0,_shfmk_shared__WEBPACK_IMPORTED_MODULE_4__.signRegistrationToken)(payload, _lib_env__WEBPACK_IMPORTED_MODULE_5__.QR_PRIVATE_KEY_PEM);\n        // Guardrail: Ensure token was actually created\n        if (!token) {\n            throw new Error(\"QR token generation failed. This might be due to a missing or invalid QR_PRIVATE_KEY_PEM.\");\n        }\n        if (generated && publicKeyPem) {\n            console.warn(\"DEMO MODE: QR_PRIVATE_KEY_PEM missing. Generated temporary key pair.\");\n        }\n        // 5. Create registration in a single DB call\n        const registration = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_3__.createRegistration)({\n            id: registrationId,\n            conferenceId: conference.id,\n            fullName: input.fullName,\n            email: input.email,\n            phone: input.phone,\n            institution: input.institution,\n            category: input.category,\n            feeAmount: fee,\n            currency: conference.currency,\n            qrToken: token\n        });\n        // 6. Send confirmation email (best effort)\n        const qrDataUrl = await (0,_lib_qr__WEBPACK_IMPORTED_MODULE_6__.createQrDataUrl)(token);\n        let emailSent = false;\n        try {\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_7__.sendConfirmationEmail)({\n                to: registration.email,\n                fullName: registration.full_name,\n                qrDataUrl,\n                conferenceName: conference.name,\n                conferenceLocation: conference.location,\n                conferenceStartDate: conference.start_date,\n                conferenceEndDate: conference.end_date,\n                category: registration.category,\n                fee,\n                currency: conference.currency\n            });\n            emailSent = true;\n        } catch (error) {\n            // Log the error, but don't block the user. The UI will show a retry option.\n            console.error(\"Email sending failed on initial registration:\", error);\n            emailSent = false;\n        }\n        // 7. Return success\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true,\n            registrationId: registration.id,\n            token,\n            emailSent\n        });\n    } catch (error) {\n        console.error(\"[/api/register] Error:\", error);\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_9__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: false,\n                error: error.issues[0]?.message ?? \"T\\xeb dh\\xebna t\\xeb pavlefshme\",\n                code: \"INVALID_INPUT\"\n            }, {\n                status: 400\n            });\n        }\n        let message = \"Nj\\xeb gabim i papritur ndodhi. Ju lutemi provoni p\\xebrs\\xebri.\";\n        let code = \"UNEXPECTED_ERROR\";\n        if (error instanceof Error) {\n            if (error.message.includes(\"Missing required env vars\")) {\n                code = \"SERVER_CONFIG_ERROR\";\n            } else if (error.message.includes(\"QR token generation failed\")) {\n                code = \"QR_TOKEN_GENERATION_FAILED\";\n            } else if (error.message.includes(\"Failed to create registration\")) {\n                // This could be a unique constraint violation if the check above fails due to a race condition.\n                code = \"DB_INSERT_FAILED\";\n                if (error.message.includes(\"duplicate key value violates unique constraint\")) {\n                    code = \"ALREADY_REGISTERED\";\n                    message = \"Ky email tashm\\xeb \\xebsht\\xeb i regjistruar.\";\n                }\n            } else if (error.message.includes(\"capacity\")) {\n                code = \"CAPACITY_FULL\";\n                message = \"Kapaciteti maksimal i pjes\\xebmarr\\xebsve \\xebsht\\xeb arritur.\";\n            } else if (error.message.includes(\"closed\")) {\n                code = \"REGISTRATION_CLOSED\";\n                message = \"Regjistrimet jan\\xeb mbyllur.\";\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: message,\n            code\n        }, {\n            status: code === \"ALREADY_REGISTERED\" ? 409 : 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3JlZ2lzdGVyL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNyQztBQUNZO0FBQ2dEO0FBTTVEO0FBQ3dEO0FBQ2hCO0FBQ3JCO0FBQ1M7QUFFcEQseUNBQXlDO0FBQ3pDLE1BQU1lLGNBQWNkLHVDQUFRLENBQUM7SUFDM0JnQixVQUFVaEIsdUNBQVEsR0FBR2tCLEdBQUcsQ0FBQyxHQUFHO0lBQzVCQyxPQUFPbkIsdUNBQVEsR0FBR21CLEtBQUssQ0FBQztJQUN4QkMsT0FBT3BCLHVDQUFRLEdBQUdxQixRQUFRO0lBQzFCQyxhQUFhdEIsdUNBQVEsR0FBR3FCLFFBQVE7SUFDaENFLFVBQVV2Qix3Q0FBTSxDQUFDO1FBQUM7UUFBVTtRQUFjO0tBQVU7QUFDdEQ7QUFFTyxlQUFleUIsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLDJDQUEyQztRQUMzQ2YseURBQWVBO1FBQ2YsTUFBTWdCLE9BQU8sTUFBTUQsSUFBSUUsSUFBSTtRQUMzQixNQUFNQyxRQUFRZixZQUFZZ0IsS0FBSyxDQUFDSDtRQUVoQyw0QkFBNEI7UUFDNUIsTUFBTUksYUFBYSxNQUFNeEIsa0VBQW1CQTtRQUM1QyxJQUFJLENBQUN3QixZQUFZO1lBQ2YsT0FBT2hDLHFEQUFZQSxDQUFDNkIsSUFBSSxDQUFDO2dCQUFFSSxJQUFJO2dCQUFPQyxPQUFPO2dCQUF5QkMsTUFBTTtZQUFpQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDaEg7UUFFQSxrREFBa0Q7UUFDbEQsTUFBTUMsdUJBQXVCLE1BQU01QixxRUFBc0JBLENBQUNxQixNQUFNVixLQUFLLEVBQUVZLFdBQVdNLEVBQUU7UUFDcEYsSUFBSUQsc0JBQXNCO1lBQ3hCLElBQUk7Z0JBQ0Ysa0ZBQWtGO2dCQUNsRixNQUFNRSxZQUFZLE1BQU0xQix3REFBZUEsQ0FBQ3dCLHFCQUFxQkcsUUFBUTtnQkFDckUsTUFBTTFCLGlFQUFxQkEsQ0FBQztvQkFDMUIyQixJQUFJSixxQkFBcUJqQixLQUFLO29CQUM5QkgsVUFBVW9CLHFCQUFxQkssU0FBUztvQkFDeENIO29CQUNBSSxnQkFBZ0JYLFdBQVdZLElBQUk7b0JBQy9CQyxvQkFBb0JiLFdBQVdjLFFBQVE7b0JBQ3ZDQyxxQkFBcUJmLFdBQVdnQixVQUFVO29CQUMxQ0MsbUJBQW1CakIsV0FBV2tCLFFBQVE7b0JBQ3RDMUIsVUFBVWEscUJBQXFCYixRQUFRO29CQUN2QzJCLEtBQUtkLHFCQUFxQmUsVUFBVTtvQkFDcENDLFVBQVVoQixxQkFBcUJnQixRQUFRO2dCQUN6QztnQkFDQSxzREFBc0Q7Z0JBQ3RELE9BQU9yRCxxREFBWUEsQ0FBQzZCLElBQUksQ0FBQztvQkFBRUksSUFBSTtvQkFBTXFCLFNBQVM7b0JBQW1GbkIsTUFBTTtnQkFBNEIsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUN0TCxFQUFFLE9BQU9tQixZQUFZO2dCQUNuQkMsUUFBUXRCLEtBQUssQ0FBQyxrRUFBa0VxQjtnQkFDaEYsT0FBT3ZELHFEQUFZQSxDQUFDNkIsSUFBSSxDQUFDO29CQUFFSSxJQUFJO29CQUFPQyxPQUFPO29CQUF3SEMsTUFBTTtnQkFBb0IsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNsTjtRQUNGO1FBRUEvQixtRUFBd0JBLENBQUMyQjtRQUN6QixNQUFNeUIsa0JBQWtCLE1BQU1uRCxpRUFBa0JBLENBQUMwQixXQUFXTSxFQUFFO1FBQzlEbEMseURBQWNBLENBQUNxRCxpQkFBaUJ6QjtRQUVoQyw0Q0FBNEM7UUFDNUMsTUFBTTBCLGlCQUFpQnhELGtEQUFVQTtRQUNqQyxNQUFNaUQsTUFBTWhELHVEQUFZQSxDQUFDNkIsWUFBWUYsTUFBTU4sUUFBUTtRQUVuRCxNQUFNbUMsVUFBb0M7WUFDeENDLEtBQUtGO1lBQ0xkLE1BQU1kLE1BQU1iLFFBQVE7WUFDcEI0QyxLQUFLL0IsTUFBTU4sUUFBUTtZQUNuQnNDLE1BQU05QixXQUFXK0IsSUFBSTtZQUNyQlo7WUFDQWEsS0FBS2hDLFdBQVdxQixRQUFRO1FBQzFCO1FBRUEsNkVBQTZFO1FBQzdFLE1BQU0sRUFBRVksS0FBSyxFQUFFQyxTQUFTLEVBQUVDLFlBQVksRUFBRSxHQUFHLE1BQU16RCxvRUFBcUJBLENBQ3BFaUQsU0FDQWhELHdEQUFrQkE7UUFHcEIsK0NBQStDO1FBQy9DLElBQUksQ0FBQ3NELE9BQU87WUFDVixNQUFNLElBQUlHLE1BQU07UUFDbEI7UUFFQSxJQUFJRixhQUFhQyxjQUFjO1lBQzdCWCxRQUFRYSxJQUFJLENBQUM7UUFDZjtRQUVBLDZDQUE2QztRQUM3QyxNQUFNQyxlQUFlLE1BQU0vRCxpRUFBa0JBLENBQUM7WUFDNUMrQixJQUFJb0I7WUFDSmEsY0FBY3ZDLFdBQVdNLEVBQUU7WUFDM0JyQixVQUFVYSxNQUFNYixRQUFRO1lBQ3hCRyxPQUFPVSxNQUFNVixLQUFLO1lBQ2xCQyxPQUFPUyxNQUFNVCxLQUFLO1lBQ2xCRSxhQUFhTyxNQUFNUCxXQUFXO1lBQzlCQyxVQUFVTSxNQUFNTixRQUFRO1lBQ3hCZ0QsV0FBV3JCO1lBQ1hFLFVBQVVyQixXQUFXcUIsUUFBUTtZQUM3Qm9CLFNBQVNSO1FBQ1g7UUFFQSwyQ0FBMkM7UUFDM0MsTUFBTTFCLFlBQVksTUFBTTFCLHdEQUFlQSxDQUFDb0Q7UUFDeEMsSUFBSVMsWUFBWTtRQUNoQixJQUFJO1lBQ0YsTUFBTTVELGlFQUFxQkEsQ0FBQztnQkFDMUIyQixJQUFJNkIsYUFBYWxELEtBQUs7Z0JBQ3RCSCxVQUFVcUQsYUFBYTVCLFNBQVM7Z0JBQ2hDSDtnQkFDQUksZ0JBQWdCWCxXQUFXWSxJQUFJO2dCQUMvQkMsb0JBQW9CYixXQUFXYyxRQUFRO2dCQUN2Q0MscUJBQXFCZixXQUFXZ0IsVUFBVTtnQkFDMUNDLG1CQUFtQmpCLFdBQVdrQixRQUFRO2dCQUN0QzFCLFVBQVU4QyxhQUFhOUMsUUFBUTtnQkFDL0IyQjtnQkFDQUUsVUFBVXJCLFdBQVdxQixRQUFRO1lBQy9CO1lBQ0FxQixZQUFZO1FBQ2QsRUFBRSxPQUFPeEMsT0FBTztZQUNkLDRFQUE0RTtZQUM1RXNCLFFBQVF0QixLQUFLLENBQUMsaURBQWlEQTtZQUMvRHdDLFlBQVk7UUFDZDtRQUVBLG9CQUFvQjtRQUNwQixPQUFPMUUscURBQVlBLENBQUM2QixJQUFJLENBQUM7WUFDdkJJLElBQUk7WUFDSnlCLGdCQUFnQlksYUFBYWhDLEVBQUU7WUFDL0IyQjtZQUNBUztRQUNGO0lBRUYsRUFBRSxPQUFPeEMsT0FBTztRQUNkc0IsUUFBUXRCLEtBQUssQ0FBQywwQkFBMEJBO1FBRXhDLElBQUlBLGlCQUFpQmpDLHlDQUFVLEVBQUU7WUFDL0IsT0FBT0QscURBQVlBLENBQUM2QixJQUFJLENBQUM7Z0JBQUVJLElBQUk7Z0JBQU9DLE9BQU9BLE1BQU0wQyxNQUFNLENBQUMsRUFBRSxFQUFFdEIsV0FBVztnQkFBMEJuQixNQUFNO1lBQWdCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUM1STtRQUVBLElBQUlrQixVQUFVO1FBQ2QsSUFBSW5CLE9BQU87UUFFWCxJQUFJRCxpQkFBaUJrQyxPQUFPO1lBQzFCLElBQUlsQyxNQUFNb0IsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLDhCQUE4QjtnQkFDdkQxQyxPQUFPO1lBQ1QsT0FBTyxJQUFJRCxNQUFNb0IsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLCtCQUErQjtnQkFDL0QxQyxPQUFPO1lBQ1QsT0FBTyxJQUFJRCxNQUFNb0IsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLGtDQUFrQztnQkFDbEUsZ0dBQWdHO2dCQUNoRzFDLE9BQU87Z0JBQ04sSUFBSUQsTUFBTW9CLE9BQU8sQ0FBQ3VCLFFBQVEsQ0FBQyxtREFBbUQ7b0JBQzdFMUMsT0FBTztvQkFDUG1CLFVBQVU7Z0JBQ1o7WUFDRixPQUFPLElBQUlwQixNQUFNb0IsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLGFBQWE7Z0JBQzdDMUMsT0FBTztnQkFDUG1CLFVBQVU7WUFDWixPQUFPLElBQUlwQixNQUFNb0IsT0FBTyxDQUFDdUIsUUFBUSxDQUFDLFdBQVc7Z0JBQzNDMUMsT0FBTztnQkFDUG1CLFVBQVU7WUFDWjtRQUNGO1FBRUEsT0FBT3RELHFEQUFZQSxDQUFDNkIsSUFBSSxDQUFDO1lBQUVJLElBQUk7WUFBT0MsT0FBT29CO1lBQVNuQjtRQUFLLEdBQUc7WUFBRUMsUUFBUUQsU0FBUyx1QkFBdUIsTUFBTTtRQUFJO0lBQ3BIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9hcHAvYXBpL3JlZ2lzdGVyL3JvdXRlLnRzP2Y1NDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IGNhbGN1bGF0ZUZlZSwgZW5zdXJlQ2FwYWNpdHksIGVuc3VyZVJlZ2lzdHJhdGlvbklzT3BlbiB9IGZyb20gXCJAL2xpYi9mZWVzXCI7XG5pbXBvcnQge1xuICBjb3VudFJlZ2lzdHJhdGlvbnMsXG4gIGNyZWF0ZVJlZ2lzdHJhdGlvbixcbiAgZ2V0Q29uZmVyZW5jZUJ5U2x1ZyxcbiAgZ2V0UmVnaXN0cmF0aW9uQnlFbWFpbCxcbn0gZnJvbSBcIkAvbGliL3N1cGFiYXNlXCI7XG5pbXBvcnQgeyBSZWdpc3RyYXRpb25Ub2tlblBheWxvYWQsIHNpZ25SZWdpc3RyYXRpb25Ub2tlbiB9IGZyb20gXCJAc2hmbWsvc2hhcmVkXCI7XG5pbXBvcnQgeyBRUl9QUklWQVRFX0tFWV9QRU0sIGVuc3VyZVNlcnZlckVudiB9IGZyb20gXCJAL2xpYi9lbnZcIjtcbmltcG9ydCB7IGNyZWF0ZVFyRGF0YVVybCB9IGZyb20gXCJAL2xpYi9xclwiO1xuaW1wb3J0IHsgc2VuZENvbmZpcm1hdGlvbkVtYWlsIH0gZnJvbSBcIkAvbGliL2VtYWlsXCI7XG5cbi8vIFNjaGVtYSBmb3IgdmFsaWRhdGluZyB0aGUgcmVxdWVzdCBib2R5XG5jb25zdCBpbnB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZnVsbE5hbWU6IHouc3RyaW5nKCkubWluKDIsIFwiTmFtZSBpcyByZXF1aXJlZFwiKSxcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoXCJJbnZhbGlkIGVtYWlsXCIpLFxuICBwaG9uZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpbnN0aXR1dGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjYXRlZ29yeTogei5lbnVtKFtcIm1lbWJlclwiLCBcIm5vbl9tZW1iZXJcIiwgXCJzdHVkZW50XCJdKVxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBWYWxpZGF0ZSBlbnZpcm9ubWVudCBhbmQgcmVxdWVzdCBib2R5XG4gICAgZW5zdXJlU2VydmVyRW52KCk7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgY29uc3QgaW5wdXQgPSBpbnB1dFNjaGVtYS5wYXJzZShib2R5KTtcblxuICAgIC8vIDIuIEdldCBjb25mZXJlbmNlIGRldGFpbHNcbiAgICBjb25zdCBjb25mZXJlbmNlID0gYXdhaXQgZ2V0Q29uZmVyZW5jZUJ5U2x1ZygpO1xuICAgIGlmICghY29uZmVyZW5jZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IGZhbHNlLCBlcnJvcjogXCJLb25mZXJlbmNhIG51ayB1IGdqZXRcIiwgY29kZTogXCJDT05GX05PVF9GT1VORFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgLy8gMy4gQ2hlY2sgZm9yIGR1cGxpY2F0ZXMgYW5kIHJlZ2lzdHJhdGlvbiBzdGF0dXNcbiAgICBjb25zdCBleGlzdGluZ1JlZ2lzdHJhdGlvbiA9IGF3YWl0IGdldFJlZ2lzdHJhdGlvbkJ5RW1haWwoaW5wdXQuZW1haWwsIGNvbmZlcmVuY2UuaWQpO1xuICAgIGlmIChleGlzdGluZ1JlZ2lzdHJhdGlvbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgYWxyZWFkeSByZWdpc3RlcmVkLCByZXNlbmQgdGhlIGNvbmZpcm1hdGlvbiBlbWFpbCBhcyBhIGNvdXJ0ZXN5LlxuICAgICAgICBjb25zdCBxckRhdGFVcmwgPSBhd2FpdCBjcmVhdGVRckRhdGFVcmwoZXhpc3RpbmdSZWdpc3RyYXRpb24ucXJfdG9rZW4pO1xuICAgICAgICBhd2FpdCBzZW5kQ29uZmlybWF0aW9uRW1haWwoe1xuICAgICAgICAgIHRvOiBleGlzdGluZ1JlZ2lzdHJhdGlvbi5lbWFpbCxcbiAgICAgICAgICBmdWxsTmFtZTogZXhpc3RpbmdSZWdpc3RyYXRpb24uZnVsbF9uYW1lLFxuICAgICAgICAgIHFyRGF0YVVybCxcbiAgICAgICAgICBjb25mZXJlbmNlTmFtZTogY29uZmVyZW5jZS5uYW1lLFxuICAgICAgICAgIGNvbmZlcmVuY2VMb2NhdGlvbjogY29uZmVyZW5jZS5sb2NhdGlvbixcbiAgICAgICAgICBjb25mZXJlbmNlU3RhcnREYXRlOiBjb25mZXJlbmNlLnN0YXJ0X2RhdGUsXG4gICAgICAgICAgY29uZmVyZW5jZUVuZERhdGU6IGNvbmZlcmVuY2UuZW5kX2RhdGUsXG4gICAgICAgICAgY2F0ZWdvcnk6IGV4aXN0aW5nUmVnaXN0cmF0aW9uLmNhdGVnb3J5LFxuICAgICAgICAgIGZlZTogZXhpc3RpbmdSZWdpc3RyYXRpb24uZmVlX2Ftb3VudCxcbiAgICAgICAgICBjdXJyZW5jeTogZXhpc3RpbmdSZWdpc3RyYXRpb24uY3VycmVuY3lcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9uIHN1Y2Nlc3MsIGxldCB0aGUgdXNlciBrbm93IHRoZSBlbWFpbCB3YXMgcmVzZW50LlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSwgbWVzc2FnZTogXCJLeSBlbWFpbCB0YXNobcOrIMOrc2h0w6sgaSByZWdqaXN0cnVhci4gU2FwbyBqdWEgcmlkw6tyZ3VhbSBlbWFpbC1pbiBlIGtvbmZpcm1pbWl0LlwiLCBjb2RlOiBcIkFMUkVBRFlfUkVHSVNURVJFRF9SRVNFTlRcIiB9LCB7IHN0YXR1czogMjAwIH0pO1xuICAgICAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHJlc2VuZCBjb25maXJtYXRpb24gZW1haWwgb24gZHVwbGljYXRlIHJlZ2lzdHJhdGlvbjpcIiwgZW1haWxFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6IFwiRW1haWwtaSBqdWFqIMOrc2h0w6sgaSByZWdqaXN0cnVhciwgcG9yIGTDq3JnaW1pIGkgZW1haWwtaXQgdMOrIGtvbmZpcm1pbWl0IGTDq3NodG9pLiBKdSBsdXRlbWkga29udGFrdG9uaSBvcmdhbml6YXRvcmluLlwiLCBjb2RlOiBcIkVNQUlMX1NFTkRfRkFJTEVEXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBlbnN1cmVSZWdpc3RyYXRpb25Jc09wZW4oY29uZmVyZW5jZSk7XG4gICAgY29uc3QgcmVnaXN0ZXJlZENvdW50ID0gYXdhaXQgY291bnRSZWdpc3RyYXRpb25zKGNvbmZlcmVuY2UuaWQpO1xuICAgIGVuc3VyZUNhcGFjaXR5KHJlZ2lzdGVyZWRDb3VudCwgY29uZmVyZW5jZSk7XG5cbiAgICAvLyA0LiBQcmUtZ2VuZXJhdGUgSUQgYW5kIFFSIHRva2VuIChUSEUgRklYKVxuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbklkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IGZlZSA9IGNhbGN1bGF0ZUZlZShjb25mZXJlbmNlLCBpbnB1dC5jYXRlZ29yeSk7XG5cbiAgICBjb25zdCBwYXlsb2FkOiBSZWdpc3RyYXRpb25Ub2tlblBheWxvYWQgPSB7XG4gICAgICBzdWI6IHJlZ2lzdHJhdGlvbklkLFxuICAgICAgbmFtZTogaW5wdXQuZnVsbE5hbWUsXG4gICAgICBjYXQ6IGlucHV0LmNhdGVnb3J5LFxuICAgICAgY29uZjogY29uZmVyZW5jZS5zbHVnLFxuICAgICAgZmVlLFxuICAgICAgY3VyOiBjb25mZXJlbmNlLmN1cnJlbmN5XG4gICAgfTtcblxuICAgIC8vIFRoZSBzaWduUmVnaXN0cmF0aW9uVG9rZW4gZnVuY3Rpb24gbm93IGJlY29tZXMgYSBjcml0aWNhbCBwYXJ0IG9mIHRoZSBmbG93XG4gICAgY29uc3QgeyB0b2tlbiwgZ2VuZXJhdGVkLCBwdWJsaWNLZXlQZW0gfSA9IGF3YWl0IHNpZ25SZWdpc3RyYXRpb25Ub2tlbihcbiAgICAgIHBheWxvYWQsXG4gICAgICBRUl9QUklWQVRFX0tFWV9QRU1cbiAgICApO1xuXG4gICAgLy8gR3VhcmRyYWlsOiBFbnN1cmUgdG9rZW4gd2FzIGFjdHVhbGx5IGNyZWF0ZWRcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRUiB0b2tlbiBnZW5lcmF0aW9uIGZhaWxlZC4gVGhpcyBtaWdodCBiZSBkdWUgdG8gYSBtaXNzaW5nIG9yIGludmFsaWQgUVJfUFJJVkFURV9LRVlfUEVNLlwiKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGdlbmVyYXRlZCAmJiBwdWJsaWNLZXlQZW0pIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkRFTU8gTU9ERTogUVJfUFJJVkFURV9LRVlfUEVNIG1pc3NpbmcuIEdlbmVyYXRlZCB0ZW1wb3Jhcnkga2V5IHBhaXIuXCIpO1xuICAgIH1cblxuICAgIC8vIDUuIENyZWF0ZSByZWdpc3RyYXRpb24gaW4gYSBzaW5nbGUgREIgY2FsbFxuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IGNyZWF0ZVJlZ2lzdHJhdGlvbih7XG4gICAgICBpZDogcmVnaXN0cmF0aW9uSWQsXG4gICAgICBjb25mZXJlbmNlSWQ6IGNvbmZlcmVuY2UuaWQsXG4gICAgICBmdWxsTmFtZTogaW5wdXQuZnVsbE5hbWUsXG4gICAgICBlbWFpbDogaW5wdXQuZW1haWwsXG4gICAgICBwaG9uZTogaW5wdXQucGhvbmUsXG4gICAgICBpbnN0aXR1dGlvbjogaW5wdXQuaW5zdGl0dXRpb24sXG4gICAgICBjYXRlZ29yeTogaW5wdXQuY2F0ZWdvcnksXG4gICAgICBmZWVBbW91bnQ6IGZlZSxcbiAgICAgIGN1cnJlbmN5OiBjb25mZXJlbmNlLmN1cnJlbmN5LFxuICAgICAgcXJUb2tlbjogdG9rZW4sIC8vIFBhc3MgdGhlIGdlbmVyYXRlZCB0b2tlbiBkaXJlY3RseVxuICAgIH0pO1xuXG4gICAgLy8gNi4gU2VuZCBjb25maXJtYXRpb24gZW1haWwgKGJlc3QgZWZmb3J0KVxuICAgIGNvbnN0IHFyRGF0YVVybCA9IGF3YWl0IGNyZWF0ZVFyRGF0YVVybCh0b2tlbik7XG4gICAgbGV0IGVtYWlsU2VudCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZW5kQ29uZmlybWF0aW9uRW1haWwoe1xuICAgICAgICB0bzogcmVnaXN0cmF0aW9uLmVtYWlsLFxuICAgICAgICBmdWxsTmFtZTogcmVnaXN0cmF0aW9uLmZ1bGxfbmFtZSxcbiAgICAgICAgcXJEYXRhVXJsLFxuICAgICAgICBjb25mZXJlbmNlTmFtZTogY29uZmVyZW5jZS5uYW1lLFxuICAgICAgICBjb25mZXJlbmNlTG9jYXRpb246IGNvbmZlcmVuY2UubG9jYXRpb24sXG4gICAgICAgIGNvbmZlcmVuY2VTdGFydERhdGU6IGNvbmZlcmVuY2Uuc3RhcnRfZGF0ZSxcbiAgICAgICAgY29uZmVyZW5jZUVuZERhdGU6IGNvbmZlcmVuY2UuZW5kX2RhdGUsXG4gICAgICAgIGNhdGVnb3J5OiByZWdpc3RyYXRpb24uY2F0ZWdvcnksXG4gICAgICAgIGZlZSxcbiAgICAgICAgY3VycmVuY3k6IGNvbmZlcmVuY2UuY3VycmVuY3lcbiAgICAgIH0pO1xuICAgICAgZW1haWxTZW50ID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gTG9nIHRoZSBlcnJvciwgYnV0IGRvbid0IGJsb2NrIHRoZSB1c2VyLiBUaGUgVUkgd2lsbCBzaG93IGEgcmV0cnkgb3B0aW9uLlxuICAgICAgY29uc29sZS5lcnJvcihcIkVtYWlsIHNlbmRpbmcgZmFpbGVkIG9uIGluaXRpYWwgcmVnaXN0cmF0aW9uOlwiLCBlcnJvcik7XG4gICAgICBlbWFpbFNlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyA3LiBSZXR1cm4gc3VjY2Vzc1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIHJlZ2lzdHJhdGlvbklkOiByZWdpc3RyYXRpb24uaWQsXG4gICAgICB0b2tlbixcbiAgICAgIGVtYWlsU2VudCAvLyBQYXNzIGJvb2xlYW4gaW5zdGVhZCBvZiBlcnJvciBzdHJpbmdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbL2FwaS9yZWdpc3Rlcl0gRXJyb3I6XCIsIGVycm9yKTtcblxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6IGVycm9yLmlzc3Vlc1swXT8ubWVzc2FnZSA/PyBcIlTDqyBkaMOrbmEgdMOrIHBhdmxlZnNobWVcIiwgY29kZTogXCJJTlZBTElEX0lOUFVUXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBsZXQgbWVzc2FnZSA9IFwiTmrDqyBnYWJpbSBpIHBhcHJpdHVyIG5kb2RoaS4gSnUgbHV0ZW1pIHByb3ZvbmkgcMOrcnPDq3JpLlwiO1xuICAgIGxldCBjb2RlID0gXCJVTkVYUEVDVEVEX0VSUk9SXCI7XG5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJNaXNzaW5nIHJlcXVpcmVkIGVudiB2YXJzXCIpKSB7XG4gICAgICAgIGNvZGUgPSBcIlNFUlZFUl9DT05GSUdfRVJST1JcIjtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIlFSIHRva2VuIGdlbmVyYXRpb24gZmFpbGVkXCIpKSB7XG4gICAgICAgIGNvZGUgPSBcIlFSX1RPS0VOX0dFTkVSQVRJT05fRkFJTEVEXCI7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJGYWlsZWQgdG8gY3JlYXRlIHJlZ2lzdHJhdGlvblwiKSkge1xuICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGEgdW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uIGlmIHRoZSBjaGVjayBhYm92ZSBmYWlscyBkdWUgdG8gYSByYWNlIGNvbmRpdGlvbi5cbiAgICAgICAgY29kZSA9IFwiREJfSU5TRVJUX0ZBSUxFRFwiO1xuICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJkdXBsaWNhdGUga2V5IHZhbHVlIHZpb2xhdGVzIHVuaXF1ZSBjb25zdHJhaW50XCIpKSB7XG4gICAgICAgICAgY29kZSA9IFwiQUxSRUFEWV9SRUdJU1RFUkVEXCI7XG4gICAgICAgICAgbWVzc2FnZSA9IFwiS3kgZW1haWwgdGFzaG3DqyDDq3NodMOrIGkgcmVnamlzdHJ1YXIuXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImNhcGFjaXR5XCIpKSB7XG4gICAgICAgIGNvZGUgPSBcIkNBUEFDSVRZX0ZVTExcIjtcbiAgICAgICAgbWVzc2FnZSA9IFwiS2FwYWNpdGV0aSBtYWtzaW1hbCBpIHBqZXPDq21hcnLDq3N2ZSDDq3NodMOrIGFycml0dXIuXCI7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJjbG9zZWRcIikpIHtcbiAgICAgICAgY29kZSA9IFwiUkVHSVNUUkFUSU9OX0NMT1NFRFwiO1xuICAgICAgICBtZXNzYWdlID0gXCJSZWdqaXN0cmltZXQgamFuw6sgbWJ5bGx1ci5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IGZhbHNlLCBlcnJvcjogbWVzc2FnZSwgY29kZSB9LCB7IHN0YXR1czogY29kZSA9PT0gJ0FMUkVBRFlfUkVHSVNURVJFRCcgPyA0MDkgOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ6IiwicmFuZG9tVVVJRCIsImNhbGN1bGF0ZUZlZSIsImVuc3VyZUNhcGFjaXR5IiwiZW5zdXJlUmVnaXN0cmF0aW9uSXNPcGVuIiwiY291bnRSZWdpc3RyYXRpb25zIiwiY3JlYXRlUmVnaXN0cmF0aW9uIiwiZ2V0Q29uZmVyZW5jZUJ5U2x1ZyIsImdldFJlZ2lzdHJhdGlvbkJ5RW1haWwiLCJzaWduUmVnaXN0cmF0aW9uVG9rZW4iLCJRUl9QUklWQVRFX0tFWV9QRU0iLCJlbnN1cmVTZXJ2ZXJFbnYiLCJjcmVhdGVRckRhdGFVcmwiLCJzZW5kQ29uZmlybWF0aW9uRW1haWwiLCJpbnB1dFNjaGVtYSIsIm9iamVjdCIsImZ1bGxOYW1lIiwic3RyaW5nIiwibWluIiwiZW1haWwiLCJwaG9uZSIsIm9wdGlvbmFsIiwiaW5zdGl0dXRpb24iLCJjYXRlZ29yeSIsImVudW0iLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJpbnB1dCIsInBhcnNlIiwiY29uZmVyZW5jZSIsIm9rIiwiZXJyb3IiLCJjb2RlIiwic3RhdHVzIiwiZXhpc3RpbmdSZWdpc3RyYXRpb24iLCJpZCIsInFyRGF0YVVybCIsInFyX3Rva2VuIiwidG8iLCJmdWxsX25hbWUiLCJjb25mZXJlbmNlTmFtZSIsIm5hbWUiLCJjb25mZXJlbmNlTG9jYXRpb24iLCJsb2NhdGlvbiIsImNvbmZlcmVuY2VTdGFydERhdGUiLCJzdGFydF9kYXRlIiwiY29uZmVyZW5jZUVuZERhdGUiLCJlbmRfZGF0ZSIsImZlZSIsImZlZV9hbW91bnQiLCJjdXJyZW5jeSIsIm1lc3NhZ2UiLCJlbWFpbEVycm9yIiwiY29uc29sZSIsInJlZ2lzdGVyZWRDb3VudCIsInJlZ2lzdHJhdGlvbklkIiwicGF5bG9hZCIsInN1YiIsImNhdCIsImNvbmYiLCJzbHVnIiwiY3VyIiwidG9rZW4iLCJnZW5lcmF0ZWQiLCJwdWJsaWNLZXlQZW0iLCJFcnJvciIsIndhcm4iLCJyZWdpc3RyYXRpb24iLCJjb25mZXJlbmNlSWQiLCJmZWVBbW91bnQiLCJxclRva2VuIiwiZW1haWxTZW50IiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/register/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/email.ts":
/*!**********************!*\
  !*** ./lib/email.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendConfirmationEmail: () => (/* binding */ sendConfirmationEmail)\n/* harmony export */ });\n/* harmony import */ var resend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! resend */ \"(rsc)/../../.pnpm/resend@4.8.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/resend/dist/index.mjs\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/env.ts\");\n\n\nconst resendClient = _env__WEBPACK_IMPORTED_MODULE_1__.RESEND_API_KEY ? new resend__WEBPACK_IMPORTED_MODULE_0__.Resend(_env__WEBPACK_IMPORTED_MODULE_1__.RESEND_API_KEY) : null;\nasync function sendConfirmationEmail(input) {\n    // Check if Resend client is configured\n    if (!resendClient) {\n        const errorMsg = \"RESEND_API_KEY is not configured. Cannot send confirmation email.\";\n        console.error(`[sendConfirmationEmail] ${errorMsg}`);\n        throw new Error(errorMsg);\n    }\n    // Validate FROM email address\n    if (!_env__WEBPACK_IMPORTED_MODULE_1__.RESEND_FROM_EMAIL) {\n        const errorMsg = \"RESEND_FROM_EMAIL is not configured. Cannot send confirmation email.\";\n        console.error(`[sendConfirmationEmail] ${errorMsg}`);\n        throw new Error(errorMsg);\n    }\n    const subject = `Regjistrimi juaj për konferencën e SHFK`;\n    let conferenceDetails = \"\";\n    if (input.conferenceLocation && input.conferenceStartDate) {\n        const startDate = new Date(input.conferenceStartDate).toLocaleDateString(\"sq-AL\", {\n            dateStyle: \"full\"\n        });\n        const endDate = input.conferenceEndDate ? new Date(input.conferenceEndDate).toLocaleDateString(\"sq-AL\", {\n            dateStyle: \"full\"\n        }) : null;\n        const dateText = endDate && startDate !== endDate ? ` mbahet prej ${startDate} deri më ${endDate}` : ` mbahet më ${startDate}`;\n        conferenceDetails = `<p>Konferenca ${dateText} në <strong>${input.conferenceLocation}</strong>.</p>`;\n    }\n    const html = `\n    <div style=\"font-family: Arial, sans-serif; color: #111; max-width: 600px; margin: 0 auto;\">\n      <p>Përshëndetje ${input.fullName},</p>\n      <p>Faleminderit për regjistrimin tuaj në konferencën <strong>\"${input.conferenceName}\"</strong>.</p>\n      ${conferenceDetails}\n      \n      <h3 style=\"color: #2563eb; margin-top: 24px;\">Kodi Juaj QR</h3>\n      <p>Më poshtë gjeni kodin tuaj QR. Ju lutemi ruajeni këtë kod (p.sh. si screenshot), pasi që do të përdoret për identifikimin tuaj në hyrje të konferencës. Skanimi i kodit bëhet pa pasur nevojë për internet.</p>\n      <p style=\"text-align:center; margin: 20px 0;\">\n        <img src=\"${input.qrDataUrl}\" alt=\"Kodi QR\" style=\"width:220px;height:220px;border:1px solid #eee;padding:8px;border-radius:12px;\" />\n      </p>\n      \n      <h3 style=\"color: #2563eb; margin-top: 24px;\">Detajet e Pagesës për Pjesëmarrje</h3>\n      <div style=\"background-color: #f3f4f6; padding: 16px; border-radius: 8px; margin: 16px 0;\">\n        <p style=\"margin: 8px 0;\"><strong>Banka:</strong> Pro Credit Bank</p>\n        <p style=\"margin: 8px 0;\"><strong>Nr. i llogarisë:</strong> 1110240460000163</p>\n        <p style=\"margin: 8px 0;\"><strong>Emri i llogarisë:</strong> KOSOVA FARMACEUTICAL SOCIETY</p>\n        <p style=\"margin: 8px 0;\"><strong>Adresa:</strong> Prishtinë</p>\n        <p style=\"margin: 8px 0;\"><strong>Përshkrimi:</strong> ${input.fullName}, pagesë për konferencë</p>\n        <p style=\"margin: 8px 0;\"><strong>Vlera për pagesë:</strong> ${input.fee}.00 ${input.currency}</p>\n      </div>\n      \n      <p style=\"margin-top: 20px;\"><strong>Kategoria juaj e regjistrimit:</strong> ${input.category}</p>\n      \n      <p style=\"margin-top: 24px;\">Nëse kodi QR nuk shfaqet, ju lutemi vizitoni faqen e suksesit të regjistrimit duke përdorur linkun që ju është dërguar.</p>\n      \n      <p style=\"margin-top: 32px;\">Me respekt,<br /><strong>Shoqata Farmaceutike e Kosovës</strong></p>\n      <p style=\"font-size: 12px; color: #666; margin-top: 16px;\">\n        Kontakt: +383 44 629 856 | +383 49 595 475\n      </p>\n    </div>\n  `;\n    console.log(`[sendConfirmationEmail] Attempting to send email to: ${input.to}`);\n    console.log(`[sendConfirmationEmail] From: ${_env__WEBPACK_IMPORTED_MODULE_1__.RESEND_FROM_EMAIL}`);\n    console.log(`[sendConfirmationEmail] Subject: ${subject}`);\n    try {\n        const { data, error } = await resendClient.emails.send({\n            from: `Shoqata Farmaceutike e Kosovës <${_env__WEBPACK_IMPORTED_MODULE_1__.RESEND_FROM_EMAIL}>`,\n            to: input.to,\n            subject,\n            html\n        });\n        if (error) {\n            console.error(`[sendConfirmationEmail] Resend API error:`, error);\n            throw new Error(`Resend API error: ${error.message}`);\n        }\n        console.log(`[sendConfirmationEmail] ✅ Email sent successfully to ${input.to}. Provider ID: ${data?.id}`);\n        return data;\n    } catch (error) {\n        console.error(`[sendConfirmationEmail] ❌ Email send failed for ${input.to}:`, error);\n        throw new Error(`Email send failed: ${error.message}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3RCLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsZ0RBQWdELEVBQUVILE1BQU13QixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUVyQjtRQUM5RSxNQUFNLElBQUlDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxNQUFpQnlCLE9BQU8sQ0FBQyxDQUFDO0lBQ2xFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9saWIvZW1haWwudHM/ODI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXNlbmQgfSBmcm9tIFwicmVzZW5kXCI7XG5pbXBvcnQgeyBSRVNFTkRfQVBJX0tFWSwgUkVTRU5EX0ZST01fRU1BSUwsIFNJVEVfQkFTRV9VUkwsIE5PREVfRU5WIH0gZnJvbSBcIi4vZW52XCI7XG5cbmNvbnN0IHJlc2VuZENsaWVudCA9IFJFU0VORF9BUElfS0VZID8gbmV3IFJlc2VuZChSRVNFTkRfQVBJX0tFWSkgOiBudWxsO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpcm1hdGlvbkVtYWlsSW5wdXQge1xuICB0bzogc3RyaW5nO1xuICBmdWxsTmFtZTogc3RyaW5nO1xuICBxckRhdGFVcmw6IHN0cmluZztcbiAgY29uZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgY29uZmVyZW5jZUxvY2F0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBjb25mZXJlbmNlU3RhcnREYXRlOiBzdHJpbmcgfCBudWxsO1xuICBjb25mZXJlbmNlRW5kRGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgZmVlOiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kQ29uZmlybWF0aW9uRW1haWwoaW5wdXQ6IENvbmZpcm1hdGlvbkVtYWlsSW5wdXQpIHtcbiAgLy8gQ2hlY2sgaWYgUmVzZW5kIGNsaWVudCBpcyBjb25maWd1cmVkXG4gIGlmICghcmVzZW5kQ2xpZW50KSB7XG4gICAgY29uc3QgZXJyb3JNc2cgPSBcIlJFU0VORF9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkLiBDYW5ub3Qgc2VuZCBjb25maXJtYXRpb24gZW1haWwuXCI7XG4gICAgY29uc29sZS5lcnJvcihgW3NlbmRDb25maXJtYXRpb25FbWFpbF0gJHtlcnJvck1zZ31gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICB9XG5cbiAgLy8gVmFsaWRhdGUgRlJPTSBlbWFpbCBhZGRyZXNzXG4gIGlmICghUkVTRU5EX0ZST01fRU1BSUwpIHtcbiAgICBjb25zdCBlcnJvck1zZyA9IFwiUkVTRU5EX0ZST01fRU1BSUwgaXMgbm90IGNvbmZpZ3VyZWQuIENhbm5vdCBzZW5kIGNvbmZpcm1hdGlvbiBlbWFpbC5cIjtcbiAgICBjb25zb2xlLmVycm9yKGBbc2VuZENvbmZpcm1hdGlvbkVtYWlsXSAke2Vycm9yTXNnfWApO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gIH1cblxuICBjb25zdCBzdWJqZWN0ID0gYFJlZ2ppc3RyaW1pIGp1YWogcMOrciBrb25mZXJlbmPDq24gZSBTSEZLYDtcblxuICBsZXQgY29uZmVyZW5jZURldGFpbHMgPSBcIlwiO1xuICBpZiAoaW5wdXQuY29uZmVyZW5jZUxvY2F0aW9uICYmIGlucHV0LmNvbmZlcmVuY2VTdGFydERhdGUpIHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShpbnB1dC5jb25mZXJlbmNlU3RhcnREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ3NxLUFMJywgeyBkYXRlU3R5bGU6ICdmdWxsJyB9KTtcbiAgICBjb25zdCBlbmREYXRlID0gaW5wdXQuY29uZmVyZW5jZUVuZERhdGUgPyBuZXcgRGF0ZShpbnB1dC5jb25mZXJlbmNlRW5kRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdzcS1BTCcsIHsgZGF0ZVN0eWxlOiAnZnVsbCcgfSkgOiBudWxsO1xuICAgIGNvbnN0IGRhdGVUZXh0ID0gZW5kRGF0ZSAmJiBzdGFydERhdGUgIT09IGVuZERhdGUgPyBgIG1iYWhldCBwcmVqICR7c3RhcnREYXRlfSBkZXJpIG3DqyAke2VuZERhdGV9YCA6IGAgbWJhaGV0IG3DqyAke3N0YXJ0RGF0ZX1gO1xuICAgIGNvbmZlcmVuY2VEZXRhaWxzID0gYDxwPktvbmZlcmVuY2EgJHtkYXRlVGV4dH0gbsOrIDxzdHJvbmc+JHtpbnB1dC5jb25mZXJlbmNlTG9jYXRpb259PC9zdHJvbmc+LjwvcD5gO1xuICB9XG5cbiAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBjb2xvcjogIzExMTsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICA8cD5Qw6tyc2jDq25kZXRqZSAke2lucHV0LmZ1bGxOYW1lfSw8L3A+XG4gICAgICA8cD5GYWxlbWluZGVyaXQgcMOrciByZWdqaXN0cmltaW4gdHVhaiBuw6sga29uZmVyZW5jw6tuIDxzdHJvbmc+XCIke2lucHV0LmNvbmZlcmVuY2VOYW1lfVwiPC9zdHJvbmc+LjwvcD5cbiAgICAgICR7Y29uZmVyZW5jZURldGFpbHN9XG4gICAgICBcbiAgICAgIDxoMyBzdHlsZT1cImNvbG9yOiAjMjU2M2ViOyBtYXJnaW4tdG9wOiAyNHB4O1wiPktvZGkgSnVhaiBRUjwvaDM+XG4gICAgICA8cD5Nw6sgcG9zaHTDqyBnamVuaSBrb2RpbiB0dWFqIFFSLiBKdSBsdXRlbWkgcnVhamVuaSBrw6t0w6sga29kIChwLnNoLiBzaSBzY3JlZW5zaG90KSwgcGFzaSBxw6sgZG8gdMOrIHDDq3Jkb3JldCBww6tyIGlkZW50aWZpa2ltaW4gdHVhaiBuw6sgaHlyamUgdMOrIGtvbmZlcmVuY8Orcy4gU2thbmltaSBpIGtvZGl0IGLDq2hldCBwYSBwYXN1ciBuZXZvasOrIHDDq3IgaW50ZXJuZXQuPC9wPlxuICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICAgIDxpbWcgc3JjPVwiJHtpbnB1dC5xckRhdGFVcmx9XCIgYWx0PVwiS29kaSBRUlwiIHN0eWxlPVwid2lkdGg6MjIwcHg7aGVpZ2h0OjIyMHB4O2JvcmRlcjoxcHggc29saWQgI2VlZTtwYWRkaW5nOjhweDtib3JkZXItcmFkaXVzOjEycHg7XCIgLz5cbiAgICAgIDwvcD5cbiAgICAgIFxuICAgICAgPGgzIHN0eWxlPVwiY29sb3I6ICMyNTYzZWI7IG1hcmdpbi10b3A6IDI0cHg7XCI+RGV0YWpldCBlIFBhZ2Vzw6tzIHDDq3IgUGplc8OrbWFycmplPC9oMz5cbiAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmNGY2OyBwYWRkaW5nOiAxNnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTZweCAwO1wiPlxuICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7XCI+PHN0cm9uZz5CYW5rYTo8L3N0cm9uZz4gUHJvIENyZWRpdCBCYW5rPC9wPlxuICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7XCI+PHN0cm9uZz5Oci4gaSBsbG9nYXJpc8OrOjwvc3Ryb25nPiAxMTEwMjQwNDYwMDAwMTYzPC9wPlxuICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7XCI+PHN0cm9uZz5FbXJpIGkgbGxvZ2FyaXPDqzo8L3N0cm9uZz4gS09TT1ZBIEZBUk1BQ0VVVElDQUwgU09DSUVUWTwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDhweCAwO1wiPjxzdHJvbmc+QWRyZXNhOjwvc3Ryb25nPiBQcmlzaHRpbsOrPC9wPlxuICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7XCI+PHN0cm9uZz5Qw6tyc2hrcmltaTo8L3N0cm9uZz4gJHtpbnB1dC5mdWxsTmFtZX0sIHBhZ2Vzw6sgcMOrciBrb25mZXJlbmPDqzwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDhweCAwO1wiPjxzdHJvbmc+VmxlcmEgcMOrciBwYWdlc8OrOjwvc3Ryb25nPiAke2lucHV0LmZlZX0uMDAgJHtpbnB1dC5jdXJyZW5jeX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPHAgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4O1wiPjxzdHJvbmc+S2F0ZWdvcmlhIGp1YWogZSByZWdqaXN0cmltaXQ6PC9zdHJvbmc+ICR7aW5wdXQuY2F0ZWdvcnl9PC9wPlxuICAgICAgXG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbi10b3A6IDI0cHg7XCI+TsOrc2Uga29kaSBRUiBudWsgc2hmYXFldCwganUgbHV0ZW1pIHZpeml0b25pIGZhcWVuIGUgc3Vrc2VzaXQgdMOrIHJlZ2ppc3RyaW1pdCBkdWtlIHDDq3Jkb3J1ciBsaW5rdW4gccOrIGp1IMOrc2h0w6sgZMOrcmd1YXIuPC9wPlxuICAgICAgXG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbi10b3A6IDMycHg7XCI+TWUgcmVzcGVrdCw8YnIgLz48c3Ryb25nPlNob3FhdGEgRmFybWFjZXV0aWtlIGUgS29zb3bDq3M8L3N0cm9uZz48L3A+XG4gICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IG1hcmdpbi10b3A6IDE2cHg7XCI+XG4gICAgICAgIEtvbnRha3Q6ICszODMgNDQgNjI5IDg1NiB8ICszODMgNDkgNTk1IDQ3NVxuICAgICAgPC9wPlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIGNvbnNvbGUubG9nKGBbc2VuZENvbmZpcm1hdGlvbkVtYWlsXSBBdHRlbXB0aW5nIHRvIHNlbmQgZW1haWwgdG86ICR7aW5wdXQudG99YCk7XG4gIGNvbnNvbGUubG9nKGBbc2VuZENvbmZpcm1hdGlvbkVtYWlsXSBGcm9tOiAke1JFU0VORF9GUk9NX0VNQUlMfWApO1xuICBjb25zb2xlLmxvZyhgW3NlbmRDb25maXJtYXRpb25FbWFpbF0gU3ViamVjdDogJHtzdWJqZWN0fWApO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcmVzZW5kQ2xpZW50LmVtYWlscy5zZW5kKHtcbiAgICAgIGZyb206IGBTaG9xYXRhIEZhcm1hY2V1dGlrZSBlIEtvc292w6tzIDwke1JFU0VORF9GUk9NX0VNQUlMfT5gLFxuICAgICAgdG86IGlucHV0LnRvLFxuICAgICAgc3ViamVjdCxcbiAgICAgIGh0bWxcbiAgICB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgW3NlbmRDb25maXJtYXRpb25FbWFpbF0gUmVzZW5kIEFQSSBlcnJvcjpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlc2VuZCBBUEkgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgW3NlbmRDb25maXJtYXRpb25FbWFpbF0g4pyFIEVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IHRvICR7aW5wdXQudG99LiBQcm92aWRlciBJRDogJHtkYXRhPy5pZH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBbc2VuZENvbmZpcm1hdGlvbkVtYWlsXSDinYwgRW1haWwgc2VuZCBmYWlsZWQgZm9yICR7aW5wdXQudG99OmAsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVtYWlsIHNlbmQgZmFpbGVkOiAkeyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJSZXNlbmQiLCJSRVNFTkRfQVBJX0tFWSIsIlJFU0VORF9GUk9NX0VNQUlMIiwicmVzZW5kQ2xpZW50Iiwic2VuZENvbmZpcm1hdGlvbkVtYWlsIiwiaW5wdXQiLCJlcnJvck1zZyIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwic3ViamVjdCIsImNvbmZlcmVuY2VEZXRhaWxzIiwiY29uZmVyZW5jZUxvY2F0aW9uIiwiY29uZmVyZW5jZVN0YXJ0RGF0ZSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJkYXRlU3R5bGUiLCJlbmREYXRlIiwiY29uZmVyZW5jZUVuZERhdGUiLCJkYXRlVGV4dCIsImh0bWwiLCJmdWxsTmFtZSIsImNvbmZlcmVuY2VOYW1lIiwicXJEYXRhVXJsIiwiZmVlIiwiY3VycmVuY3kiLCJjYXRlZ29yeSIsImxvZyIsInRvIiwiZGF0YSIsImVtYWlscyIsInNlbmQiLCJmcm9tIiwibWVzc2FnZSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./lib/env.ts":
/*!********************!*\
  !*** ./lib/env.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADMIN_SECRET: () => (/* binding */ ADMIN_SECRET),\n/* harmony export */   CONFERENCE_SLUG: () => (/* binding */ CONFERENCE_SLUG),\n/* harmony export */   JWT_SECRET: () => (/* binding */ JWT_SECRET),\n/* harmony export */   NODE_ENV: () => (/* binding */ NODE_ENV),\n/* harmony export */   QR_PRIVATE_KEY_PEM: () => (/* binding */ QR_PRIVATE_KEY_PEM),\n/* harmony export */   RESEND_API_KEY: () => (/* binding */ RESEND_API_KEY),\n/* harmony export */   RESEND_FROM_EMAIL: () => (/* binding */ RESEND_FROM_EMAIL),\n/* harmony export */   SITE_BASE_URL: () => (/* binding */ SITE_BASE_URL),\n/* harmony export */   SUPABASE_SERVICE_KEY: () => (/* binding */ SUPABASE_SERVICE_KEY),\n/* harmony export */   SUPABASE_URL: () => (/* binding */ SUPABASE_URL),\n/* harmony export */   ensureServerEnv: () => (/* binding */ ensureServerEnv)\n/* harmony export */ });\nconst CONFERENCE_SLUG = process.env.CONFERENCE_SLUG ?? \"annual-conference\";\nconst SUPABASE_URL = process.env.SUPABASE_URL ?? \"\";\nconst SUPABASE_SERVICE_KEY = process.env.SUPABASE_SERVICE_KEY ?? \"\";\nconst RESEND_API_KEY = process.env.RESEND_API_KEY ?? \"\";\nconst RESEND_FROM_EMAIL = process.env.RESEND_FROM_EMAIL ?? \"\";\n// Important: Handle escaped newlines from .env files for the PEM key\nconst QR_PRIVATE_KEY_PEM = process.env.QR_PRIVATE_KEY_PEM?.replace(/\\\\n/g, \"\\n\");\nconst ADMIN_SECRET = process.env.ADMIN_SECRET ?? \"\";\nconst JWT_SECRET = process.env.JWT_SECRET ?? ADMIN_SECRET;\nconst SITE_BASE_URL = process.env.SITE_BASE_URL ?? \"http://localhost:3000\";\nconst NODE_ENV = \"development\";\n/**\n * Checks that all required server-side environment variables are present.\n * Throws an error if any are missing.\n */ function ensureServerEnv() {\n    const missing = [];\n    if (!SUPABASE_URL) missing.push(\"SUPABASE_URL\");\n    if (!SUPABASE_SERVICE_KEY) missing.push(\"SUPABASE_SERVICE_KEY\");\n    if (!RESEND_API_KEY) missing.push(\"RESEND_API_KEY\");\n    if (!RESEND_FROM_EMAIL) missing.push(\"RESEND_FROM_EMAIL\");\n    if (!JWT_SECRET) missing.push(\"JWT_SECRET\");\n    if (missing.length > 0) {\n        // This error is caught by the API route's try/catch block.\n        throw new Error(`Missing required env vars: ${missing.join(\", \")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZW52LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNGLGVBQWUsSUFBSSxvQkFBb0I7QUFDM0UsTUFBTUcsZUFBZUYsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUksR0FBRztBQUNwRCxNQUFNQyx1QkFBdUJILFFBQVFDLEdBQUcsQ0FBQ0Usb0JBQW9CLElBQUksR0FBRztBQUNwRSxNQUFNQyxpQkFBaUJKLFFBQVFDLEdBQUcsQ0FBQ0csY0FBYyxJQUFJLEdBQUc7QUFDeEQsTUFBTUMsb0JBQW9CTCxRQUFRQyxHQUFHLENBQUNJLGlCQUFpQixJQUFJLEdBQUc7QUFDckUscUVBQXFFO0FBQzlELE1BQU1DLHFCQUFxQk4sUUFBUUMsR0FBRyxDQUFDSyxrQkFBa0IsRUFBRUMsUUFBUSxRQUFRLE1BQU07QUFDakYsTUFBTUMsZUFBZVIsUUFBUUMsR0FBRyxDQUFDTyxZQUFZLElBQUksR0FBRztBQUNwRCxNQUFNQyxhQUFhVCxRQUFRQyxHQUFHLENBQUNRLFVBQVUsSUFBSUQsYUFBYTtBQUMxRCxNQUFNRSxnQkFDWFYsUUFBUUMsR0FBRyxDQUFDUyxhQUFhLElBQUksd0JBQXdCO0FBQ2hELE1BQU1DLFdBWGIsY0FXNkM7QUFFN0M7OztDQUdDLEdBQ00sU0FBU0M7SUFDZCxNQUFNQyxVQUFvQixFQUFFO0lBQzVCLElBQUksQ0FBQ1gsY0FBY1csUUFBUUMsSUFBSSxDQUFDO0lBQ2hDLElBQUksQ0FBQ1gsc0JBQXNCVSxRQUFRQyxJQUFJLENBQUM7SUFDeEMsSUFBSSxDQUFDVixnQkFBZ0JTLFFBQVFDLElBQUksQ0FBQztJQUNsQyxJQUFJLENBQUNULG1CQUFtQlEsUUFBUUMsSUFBSSxDQUFDO0lBQ3JDLElBQUksQ0FBQ0wsWUFBWUksUUFBUUMsSUFBSSxDQUFDO0lBRTlCLElBQUlELFFBQVFFLE1BQU0sR0FBRyxHQUFHO1FBQ3RCLDJEQUEyRDtRQUMzRCxNQUFNLElBQUlDLE1BQU0sQ0FBQywyQkFBMkIsRUFBRUgsUUFBUUksSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNwRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbGliL2Vudi50cz85M2YyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBDT05GRVJFTkNFX1NMVUcgPSBwcm9jZXNzLmVudi5DT05GRVJFTkNFX1NMVUcgPz8gXCJhbm51YWwtY29uZmVyZW5jZVwiO1xuZXhwb3J0IGNvbnN0IFNVUEFCQVNFX1VSTCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCA/PyBcIlwiO1xuZXhwb3J0IGNvbnN0IFNVUEFCQVNFX1NFUlZJQ0VfS0VZID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVkgPz8gXCJcIjtcbmV4cG9ydCBjb25zdCBSRVNFTkRfQVBJX0tFWSA9IHByb2Nlc3MuZW52LlJFU0VORF9BUElfS0VZID8/IFwiXCI7XG5leHBvcnQgY29uc3QgUkVTRU5EX0ZST01fRU1BSUwgPSBwcm9jZXNzLmVudi5SRVNFTkRfRlJPTV9FTUFJTCA/PyBcIlwiO1xuLy8gSW1wb3J0YW50OiBIYW5kbGUgZXNjYXBlZCBuZXdsaW5lcyBmcm9tIC5lbnYgZmlsZXMgZm9yIHRoZSBQRU0ga2V5XG5leHBvcnQgY29uc3QgUVJfUFJJVkFURV9LRVlfUEVNID0gcHJvY2Vzcy5lbnYuUVJfUFJJVkFURV9LRVlfUEVNPy5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyk7XG5leHBvcnQgY29uc3QgQURNSU5fU0VDUkVUID0gcHJvY2Vzcy5lbnYuQURNSU5fU0VDUkVUID8/IFwiXCI7XG5leHBvcnQgY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgPz8gQURNSU5fU0VDUkVUO1xuZXhwb3J0IGNvbnN0IFNJVEVfQkFTRV9VUkwgPVxuICBwcm9jZXNzLmVudi5TSVRFX0JBU0VfVVJMID8/IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG5leHBvcnQgY29uc3QgTk9ERV9FTlYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcblxuLyoqXG4gKiBDaGVja3MgdGhhdCBhbGwgcmVxdWlyZWQgc2VydmVyLXNpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBwcmVzZW50LlxuICogVGhyb3dzIGFuIGVycm9yIGlmIGFueSBhcmUgbWlzc2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVNlcnZlckVudigpIHtcbiAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcbiAgaWYgKCFTVVBBQkFTRV9VUkwpIG1pc3NpbmcucHVzaChcIlNVUEFCQVNFX1VSTFwiKTtcbiAgaWYgKCFTVVBBQkFTRV9TRVJWSUNFX0tFWSkgbWlzc2luZy5wdXNoKFwiU1VQQUJBU0VfU0VSVklDRV9LRVlcIik7XG4gIGlmICghUkVTRU5EX0FQSV9LRVkpIG1pc3NpbmcucHVzaChcIlJFU0VORF9BUElfS0VZXCIpO1xuICBpZiAoIVJFU0VORF9GUk9NX0VNQUlMKSBtaXNzaW5nLnB1c2goXCJSRVNFTkRfRlJPTV9FTUFJTFwiKTtcbiAgaWYgKCFKV1RfU0VDUkVUKSBtaXNzaW5nLnB1c2goXCJKV1RfU0VDUkVUXCIpO1xuXG4gIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHtcbiAgICAvLyBUaGlzIGVycm9yIGlzIGNhdWdodCBieSB0aGUgQVBJIHJvdXRlJ3MgdHJ5L2NhdGNoIGJsb2NrLlxuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnYgdmFyczogJHttaXNzaW5nLmpvaW4oXCIsIFwiKX1gKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNPTkZFUkVOQ0VfU0xVRyIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX0tFWSIsIlJFU0VORF9BUElfS0VZIiwiUkVTRU5EX0ZST01fRU1BSUwiLCJRUl9QUklWQVRFX0tFWV9QRU0iLCJyZXBsYWNlIiwiQURNSU5fU0VDUkVUIiwiSldUX1NFQ1JFVCIsIlNJVEVfQkFTRV9VUkwiLCJOT0RFX0VOViIsImVuc3VyZVNlcnZlckVudiIsIm1pc3NpbmciLCJwdXNoIiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./lib/fees.ts":
/*!*********************!*\
  !*** ./lib/fees.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateFee: () => (/* binding */ calculateFee),\n/* harmony export */   ensureCapacity: () => (/* binding */ ensureCapacity),\n/* harmony export */   ensureRegistrationIsOpen: () => (/* binding */ ensureRegistrationIsOpen)\n/* harmony export */ });\nfunction calculateFee(conference, category) {\n    switch(category){\n        case \"member\":\n            return Number(conference.member_fee);\n        case \"non_member\":\n            return Number(conference.non_member_fee);\n        case \"student\":\n            return Number(conference.student_fee);\n        default:\n            return Number(conference.non_member_fee);\n    }\n}\nfunction ensureRegistrationIsOpen(conference) {\n    const now = new Date();\n    if (conference.registration_open && new Date(conference.registration_open) > now) {\n        throw new Error(\"Registrations are not open yet for this conference.\");\n    }\n    if (conference.registration_close && new Date(conference.registration_close) < now) {\n        throw new Error(\"Registration window has closed.\");\n    }\n}\nfunction ensureCapacity(registeredCount, conference) {\n    if (conference.max_participants && registeredCount >= conference.max_participants) {\n        throw new Error(\"Conference capacity is full.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZmVlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFHTyxTQUFTQSxhQUFhQyxVQUFzQixFQUFFQyxRQUE4QjtJQUNqRixPQUFRQTtRQUNOLEtBQUs7WUFDSCxPQUFPQyxPQUFPRixXQUFXRyxVQUFVO1FBQ3JDLEtBQUs7WUFDSCxPQUFPRCxPQUFPRixXQUFXSSxjQUFjO1FBQ3pDLEtBQUs7WUFDSCxPQUFPRixPQUFPRixXQUFXSyxXQUFXO1FBQ3RDO1lBQ0UsT0FBT0gsT0FBT0YsV0FBV0ksY0FBYztJQUMzQztBQUNGO0FBRU8sU0FBU0UseUJBQXlCTixVQUFzQjtJQUM3RCxNQUFNTyxNQUFNLElBQUlDO0lBRWhCLElBQUlSLFdBQVdTLGlCQUFpQixJQUFJLElBQUlELEtBQUtSLFdBQVdTLGlCQUFpQixJQUFJRixLQUFLO1FBQ2hGLE1BQU0sSUFBSUcsTUFBTTtJQUNsQjtJQUVBLElBQUlWLFdBQVdXLGtCQUFrQixJQUFJLElBQUlILEtBQUtSLFdBQVdXLGtCQUFrQixJQUFJSixLQUFLO1FBQ2xGLE1BQU0sSUFBSUcsTUFBTTtJQUNsQjtBQUNGO0FBRU8sU0FBU0UsZUFBZUMsZUFBdUIsRUFBRWIsVUFBc0I7SUFDNUUsSUFBSUEsV0FBV2MsZ0JBQWdCLElBQUlELG1CQUFtQmIsV0FBV2MsZ0JBQWdCLEVBQUU7UUFDakYsTUFBTSxJQUFJSixNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9saWIvZmVlcy50cz80YWYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbmZlcmVuY2UgfSBmcm9tIFwiLi9zdXBhYmFzZVwiO1xuaW1wb3J0IHsgUmVnaXN0cmF0aW9uQ2F0ZWdvcnkgfSBmcm9tIFwiQHNoZm1rL3NoYXJlZFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRmVlKGNvbmZlcmVuY2U6IENvbmZlcmVuY2UsIGNhdGVnb3J5OiBSZWdpc3RyYXRpb25DYXRlZ29yeSk6IG51bWJlciB7XG4gIHN3aXRjaCAoY2F0ZWdvcnkpIHtcbiAgICBjYXNlIFwibWVtYmVyXCI6XG4gICAgICByZXR1cm4gTnVtYmVyKGNvbmZlcmVuY2UubWVtYmVyX2ZlZSk7XG4gICAgY2FzZSBcIm5vbl9tZW1iZXJcIjpcbiAgICAgIHJldHVybiBOdW1iZXIoY29uZmVyZW5jZS5ub25fbWVtYmVyX2ZlZSk7XG4gICAgY2FzZSBcInN0dWRlbnRcIjpcbiAgICAgIHJldHVybiBOdW1iZXIoY29uZmVyZW5jZS5zdHVkZW50X2ZlZSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBOdW1iZXIoY29uZmVyZW5jZS5ub25fbWVtYmVyX2ZlZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVJlZ2lzdHJhdGlvbklzT3Blbihjb25mZXJlbmNlOiBDb25mZXJlbmNlKSB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cbiAgaWYgKGNvbmZlcmVuY2UucmVnaXN0cmF0aW9uX29wZW4gJiYgbmV3IERhdGUoY29uZmVyZW5jZS5yZWdpc3RyYXRpb25fb3BlbikgPiBub3cpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWdpc3RyYXRpb25zIGFyZSBub3Qgb3BlbiB5ZXQgZm9yIHRoaXMgY29uZmVyZW5jZS5cIik7XG4gIH1cblxuICBpZiAoY29uZmVyZW5jZS5yZWdpc3RyYXRpb25fY2xvc2UgJiYgbmV3IERhdGUoY29uZmVyZW5jZS5yZWdpc3RyYXRpb25fY2xvc2UpIDwgbm93KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUmVnaXN0cmF0aW9uIHdpbmRvdyBoYXMgY2xvc2VkLlwiKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQ2FwYWNpdHkocmVnaXN0ZXJlZENvdW50OiBudW1iZXIsIGNvbmZlcmVuY2U6IENvbmZlcmVuY2UpIHtcbiAgaWYgKGNvbmZlcmVuY2UubWF4X3BhcnRpY2lwYW50cyAmJiByZWdpc3RlcmVkQ291bnQgPj0gY29uZmVyZW5jZS5tYXhfcGFydGljaXBhbnRzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmVyZW5jZSBjYXBhY2l0eSBpcyBmdWxsLlwiKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNhbGN1bGF0ZUZlZSIsImNvbmZlcmVuY2UiLCJjYXRlZ29yeSIsIk51bWJlciIsIm1lbWJlcl9mZWUiLCJub25fbWVtYmVyX2ZlZSIsInN0dWRlbnRfZmVlIiwiZW5zdXJlUmVnaXN0cmF0aW9uSXNPcGVuIiwibm93IiwiRGF0ZSIsInJlZ2lzdHJhdGlvbl9vcGVuIiwiRXJyb3IiLCJyZWdpc3RyYXRpb25fY2xvc2UiLCJlbnN1cmVDYXBhY2l0eSIsInJlZ2lzdGVyZWRDb3VudCIsIm1heF9wYXJ0aWNpcGFudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/fees.ts\n");

/***/ }),

/***/ "(rsc)/./lib/qr.ts":
/*!*******************!*\
  !*** ./lib/qr.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createQrDataUrl: () => (/* binding */ createQrDataUrl)\n/* harmony export */ });\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qrcode */ \"(rsc)/../../.pnpm/qrcode@1.5.4/node_modules/qrcode/lib/index.js\");\n\nasync function createQrDataUrl(token) {\n    return qrcode__WEBPACK_IMPORTED_MODULE_0__.toDataURL(token, {\n        errorCorrectionLevel: \"M\",\n        margin: 2\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEI7QUFFckIsZUFBZUMsZ0JBQWdCQyxLQUFhO0lBQ2pELE9BQU9GLDZDQUFnQixDQUFDRSxPQUFPO1FBQUVFLHNCQUFzQjtRQUFLQyxRQUFRO0lBQUU7QUFDeEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9saWIvcXIudHM/ZmQyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUVJDb2RlIGZyb20gXCJxcmNvZGVcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVFyRGF0YVVybCh0b2tlbjogc3RyaW5nKSB7XG4gIHJldHVybiBRUkNvZGUudG9EYXRhVVJMKHRva2VuLCB7IGVycm9yQ29ycmVjdGlvbkxldmVsOiBcIk1cIiwgbWFyZ2luOiAyIH0pO1xufVxuIl0sIm5hbWVzIjpbIlFSQ29kZSIsImNyZWF0ZVFyRGF0YVVybCIsInRva2VuIiwidG9EYXRhVVJMIiwiZXJyb3JDb3JyZWN0aW9uTGV2ZWwiLCJtYXJnaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/qr.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countRegistrations: () => (/* binding */ countRegistrations),\n/* harmony export */   createRegistration: () => (/* binding */ createRegistration),\n/* harmony export */   getConferenceById: () => (/* binding */ getConferenceById),\n/* harmony export */   getConferenceBySlug: () => (/* binding */ getConferenceBySlug),\n/* harmony export */   getRegistrationByEmail: () => (/* binding */ getRegistrationByEmail),\n/* harmony export */   getRegistrationById: () => (/* binding */ getRegistrationById),\n/* harmony export */   listRegistrations: () => (/* binding */ listRegistrations),\n/* harmony export */   updateCheckInStatus: () => (/* binding */ updateCheckInStatus)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../../.pnpm/@supabase+supabase-js@2.84.0/node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/env.ts\");\n\n\n// --- Client Setup ---\nconst supabaseClient = _env__WEBPACK_IMPORTED_MODULE_0__.SUPABASE_URL && _env__WEBPACK_IMPORTED_MODULE_0__.SUPABASE_SERVICE_KEY ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(_env__WEBPACK_IMPORTED_MODULE_0__.SUPABASE_URL, _env__WEBPACK_IMPORTED_MODULE_0__.SUPABASE_SERVICE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n}) : null;\nfunction requireClient() {\n    if (!supabaseClient) {\n        // This will be caught by the API route's try/catch block\n        throw new Error(\"Supabase client not configured. Check SUPABASE_URL and SUPABASE_SERVICE_KEY.\");\n    }\n    return supabaseClient;\n}\n// --- Database Functions ---\nasync function getRegistrationByEmail(email, conferenceId) {\n    const client = requireClient();\n    const normalizedEmail = email.toLowerCase().trim();\n    const { data, error } = await client.from(\"registrations\").select(\"*\").eq(\"email\", normalizedEmail).eq(\"conference_id\", conferenceId).maybeSingle();\n    if (error) {\n        console.error(\"DB Error in getRegistrationByEmail:\", error);\n        throw new Error(`Failed to query for existing registration: ${error.message}`);\n    }\n    return data;\n}\n/**\n * Creates a new registration record in a single atomic operation.\n * Now accepts the pre-generated registrationId and qrToken.\n */ async function createRegistration(params) {\n    const client = requireClient();\n    const { data, error } = await client.from(\"registrations\").insert({\n        id: params.id,\n        conference_id: params.conferenceId,\n        full_name: params.fullName,\n        email: params.email.toLowerCase().trim(),\n        phone: params.phone ?? null,\n        institution: params.institution ?? null,\n        category: params.category,\n        fee_amount: params.feeAmount,\n        currency: params.currency,\n        qr_token: params.qrToken\n    }).select(\"*\").single();\n    if (error || !data) {\n        console.error(\"DB Error in createRegistration:\", error);\n        throw new Error(`Failed to create registration: ${error?.message ?? \"unknown error\"}`);\n    }\n    return data;\n}\nasync function getConferenceBySlug(slug = _env__WEBPACK_IMPORTED_MODULE_0__.CONFERENCE_SLUG) {\n    const client = requireClient();\n    const { data, error } = await client.from(\"conferences\").select(\"*\").eq(\"slug\", slug).maybeSingle();\n    if (error) {\n        throw new Error(`Failed to load conference: ${error.message}`);\n    }\n    return data;\n}\nasync function getConferenceById(id) {\n    const client = requireClient();\n    const { data, error } = await client.from(\"conferences\").select(\"*\").eq(\"id\", id).maybeSingle();\n    if (error) {\n        throw new Error(`Failed to load conference by ID: ${error.message}`);\n    }\n    return data;\n}\nasync function countRegistrations(conferenceId) {\n    const client = requireClient();\n    const { count, error } = await client.from(\"registrations\").select(\"*\", {\n        head: true,\n        count: \"exact\"\n    }).eq(\"conference_id\", conferenceId);\n    if (error) {\n        throw new Error(`Failed to count registrations: ${error.message}`);\n    }\n    return count ?? 0;\n}\nasync function getRegistrationById(id) {\n    const client = requireClient();\n    const { data, error } = await client.from(\"registrations\").select(\"*\").eq(\"id\", id).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"DB Error in getRegistrationById:\", error);\n        throw new Error(`Failed to load registration by ID: ${error.message}`);\n    }\n    return data;\n}\nasync function listRegistrations(params) {\n    const client = requireClient();\n    let query = client.from(\"registrations\").select(\"*\").eq(\"conference_id\", params.conferenceId).order(\"created_at\", {\n        ascending: false\n    });\n    if (params.search) {\n        const term = `%${params.search.replace(/ /g, \"%\")}%`;\n        query = query.or(`full_name.ilike.${term},email.ilike.${term}`);\n    }\n    if (params.limit) {\n        query = query.limit(params.limit);\n    }\n    const { data, error } = await query;\n    if (error) {\n        throw new Error(`Failed to list registrations: ${error.message}`);\n    }\n    return data ?? [];\n}\nasync function updateCheckInStatus(checkIns) {\n    const client = requireClient();\n    const { data, error } = await client.rpc(\"bulk_update_checkins\", {\n        payload: checkIns\n    });\n    if (error) {\n        console.error(\"RPC Error in updateCheckInStatus:\", error);\n        throw new Error(`Failed to bulk update check-ins: ${error.message}`);\n    }\n    return data ?? 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztRQUVwREwsUUFBUUEsTUFBTU0sRUFBRSxDQUFDLENBQUMsZ0JBQWdCLEVBQUVGLEtBQUssYUFBYSxFQUFFQSxLQUFLLENBQUM7SUFFaEU7SUFJQSxJQUFJNUIsT0FBTytCLEtBQUssRUFBRTtRQUVoQlAsUUFBUUEsTUFBTU8sS0FBSyxDQUFDL0IsT0FBTytCLEtBQUs7SUFFbEM7SUFJQSxNQUFNLEVBQUV4QyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1nQztJQUU5QixJQUFJaEMsT0FBTztRQUVULE1BQU0sSUFBSVQsTUFBTSxDQUFDLDhCQUE4QixFQUFFUyxNQUFNTSxPQUFPLENBQUMsQ0FBQztJQUVsRTtJQUVJLE9BQU8sUUFBK0IsRUFBRTtBQUU1QztBQUlPLGVBQWVrQyxvQkFBb0JDLFFBQXlEO0lBRS9GLE1BQU05QyxTQUFTTDtJQUVmLE1BQU0sRUFBRVMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCxPQUFPK0MsR0FBRyxDQUFDLHdCQUF3QjtRQUU3REMsU0FBU0Y7SUFFYjtJQUlBLElBQUl6QyxPQUFPO1FBRVBLLFFBQVFMLEtBQUssQ0FBQyxxQ0FBcUNBO1FBRW5ELE1BQU0sSUFBSVQsTUFBTSxDQUFDLGlDQUFpQyxFQUFFUyxNQUFNTSxPQUFPLENBQUMsQ0FBQztJQUV2RTtJQUVBLE9BQU9QLFFBQVE7QUFFbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9saWIvc3VwYWJhc2UudHM/Yzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5pbXBvcnQgeyBDT05GRVJFTkNFX1NMVUcsIFNVUEFCQVNFX1NFUlZJQ0VfS0VZLCBTVVBBQkFTRV9VUkwgfSBmcm9tIFwiLi9lbnZcIjtcbmltcG9ydCB7IFJlZ2lzdHJhdGlvbkNhdGVnb3J5IH0gZnJvbSBcIkBzaGZtay9zaGFyZWRcIjtcblxuLy8gLS0tIENsaWVudCBTZXR1cCAtLS1cbmNvbnN0IHN1cGFiYXNlQ2xpZW50ID1cbiAgU1VQQUJBU0VfVVJMICYmIFNVUEFCQVNFX1NFUlZJQ0VfS0VZXG4gICAgPyBjcmVhdGVDbGllbnQoU1VQQUJBU0VfVVJMLCBTVVBBQkFTRV9TRVJWSUNFX0tFWSwge1xuICAgICAgICBhdXRoOiB7IGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLCBwZXJzaXN0U2Vzc2lvbjogZmFsc2UgfVxuICAgICAgfSlcbiAgICA6IG51bGw7XG5cbmZ1bmN0aW9uIHJlcXVpcmVDbGllbnQoKSB7XG4gIGlmICghc3VwYWJhc2VDbGllbnQpIHtcbiAgICAvLyBUaGlzIHdpbGwgYmUgY2F1Z2h0IGJ5IHRoZSBBUEkgcm91dGUncyB0cnkvY2F0Y2ggYmxvY2tcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdXBhYmFzZSBjbGllbnQgbm90IGNvbmZpZ3VyZWQuIENoZWNrIFNVUEFCQVNFX1VSTCBhbmQgU1VQQUJBU0VfU0VSVklDRV9LRVkuXCIpO1xuICB9XG4gIHJldHVybiBzdXBhYmFzZUNsaWVudDtcbn1cblxuLy8gLS0tIEludGVyZmFjZXMgLS0tXG5leHBvcnQgaW50ZXJmYWNlIENvbmZlcmVuY2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgc3RhcnRfZGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgZW5kX2RhdGU6IHN0cmluZyB8IG51bGw7XG4gIGxvY2F0aW9uOiBzdHJpbmcgfCBudWxsO1xuICByZWdpc3RyYXRpb25fb3Blbjogc3RyaW5nIHwgbnVsbDtcbiAgcmVnaXN0cmF0aW9uX2Nsb3NlOiBzdHJpbmcgfCBudWxsO1xuICBtYXhfcGFydGljaXBhbnRzOiBudW1iZXIgfCBudWxsO1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBtZW1iZXJfZmVlOiBudW1iZXI7XG4gIG5vbl9tZW1iZXJfZmVlOiBudW1iZXI7XG4gIHN0dWRlbnRfZmVlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVnaXN0cmF0aW9uUm93IHtcbiAgaWQ6IHN0cmluZztcbiAgY29uZmVyZW5jZV9pZDogc3RyaW5nO1xuICBmdWxsX25hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgY2F0ZWdvcnk6IFJlZ2lzdHJhdGlvbkNhdGVnb3J5O1xuICBxcl90b2tlbjogc3RyaW5nO1xuICBmZWVfYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIC8vIG90aGVyIGZpZWxkcy4uLlxufVxuXG4vLyAtLS0gRGF0YWJhc2UgRnVuY3Rpb25zIC0tLVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVnaXN0cmF0aW9uQnlFbWFpbChlbWFpbDogc3RyaW5nLCBjb25mZXJlbmNlSWQ6IHN0cmluZyk6IFByb21pc2U8UmVnaXN0cmF0aW9uUm93IHwgbnVsbD4ge1xuICBjb25zdCBjbGllbnQgPSByZXF1aXJlQ2xpZW50KCk7XG4gIGNvbnN0IG5vcm1hbGl6ZWRFbWFpbCA9IGVtYWlsLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGNsaWVudFxuICAgIC5mcm9tKFwicmVnaXN0cmF0aW9uc1wiKVxuICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgLmVxKFwiZW1haWxcIiwgbm9ybWFsaXplZEVtYWlsKVxuICAgIC5lcShcImNvbmZlcmVuY2VfaWRcIiwgY29uZmVyZW5jZUlkKVxuICAgIC5tYXliZVNpbmdsZSgpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJEQiBFcnJvciBpbiBnZXRSZWdpc3RyYXRpb25CeUVtYWlsOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcXVlcnkgZm9yIGV4aXN0aW5nIHJlZ2lzdHJhdGlvbjogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG5cbiAgcmV0dXJuIGRhdGEgYXMgUmVnaXN0cmF0aW9uUm93IHwgbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHJlZ2lzdHJhdGlvbiByZWNvcmQgaW4gYSBzaW5nbGUgYXRvbWljIG9wZXJhdGlvbi5cbiAqIE5vdyBhY2NlcHRzIHRoZSBwcmUtZ2VuZXJhdGVkIHJlZ2lzdHJhdGlvbklkIGFuZCBxclRva2VuLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUmVnaXN0cmF0aW9uKHBhcmFtczoge1xuICBpZDogc3RyaW5nOyAvLyBUaGUgcHJlLWdlbmVyYXRlZCBVVUlEIGZvciB0aGUgcmVnaXN0cmF0aW9uXG4gIGNvbmZlcmVuY2VJZDogc3RyaW5nO1xuICBmdWxsTmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwaG9uZT86IHN0cmluZztcbiAgaW5zdGl0dXRpb24/OiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBSZWdpc3RyYXRpb25DYXRlZ29yeTtcbiAgZmVlQW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHFyVG9rZW46IHN0cmluZzsgLy8gVGhlIHByZS1nZW5lcmF0ZWQgSldUIGZvciB0aGUgUVIgY29kZVxufSk6IFByb21pc2U8UmVnaXN0cmF0aW9uUm93PiB7XG4gIGNvbnN0IGNsaWVudCA9IHJlcXVpcmVDbGllbnQoKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50XG4gICAgLmZyb20oXCJyZWdpc3RyYXRpb25zXCIpXG4gICAgLmluc2VydCh7XG4gICAgICBpZDogcGFyYW1zLmlkLFxuICAgICAgY29uZmVyZW5jZV9pZDogcGFyYW1zLmNvbmZlcmVuY2VJZCxcbiAgICAgIGZ1bGxfbmFtZTogcGFyYW1zLmZ1bGxOYW1lLFxuICAgICAgZW1haWw6IHBhcmFtcy5lbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKSxcbiAgICAgIHBob25lOiBwYXJhbXMucGhvbmUgPz8gbnVsbCxcbiAgICAgIGluc3RpdHV0aW9uOiBwYXJhbXMuaW5zdGl0dXRpb24gPz8gbnVsbCxcbiAgICAgIGNhdGVnb3J5OiBwYXJhbXMuY2F0ZWdvcnksXG4gICAgICBmZWVfYW1vdW50OiBwYXJhbXMuZmVlQW1vdW50LFxuICAgICAgY3VycmVuY3k6IHBhcmFtcy5jdXJyZW5jeSxcbiAgICAgIHFyX3Rva2VuOiBwYXJhbXMucXJUb2tlbiwgLy8gSW5zZXJ0IHRoZSB0b2tlbiBkaXJlY3RseVxuICAgIH0pXG4gICAgLnNlbGVjdChcIipcIilcbiAgICAuc2luZ2xlKCk7XG5cbiAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRCIEVycm9yIGluIGNyZWF0ZVJlZ2lzdHJhdGlvbjpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSByZWdpc3RyYXRpb246ICR7ZXJyb3I/Lm1lc3NhZ2UgPz8gXCJ1bmtub3duIGVycm9yXCJ9YCk7XG4gIH1cblxuICByZXR1cm4gZGF0YSBhcyBSZWdpc3RyYXRpb25Sb3c7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25mZXJlbmNlQnlTbHVnKHNsdWc6IHN0cmluZyA9IENPTkZFUkVOQ0VfU0xVRyk6IFByb21pc2U8Q29uZmVyZW5jZSB8IG51bGw+IHtcbiAgY29uc3QgY2xpZW50ID0gcmVxdWlyZUNsaWVudCgpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBjbGllbnRcbiAgICAuZnJvbShcImNvbmZlcmVuY2VzXCIpXG4gICAgLnNlbGVjdChcIipcIilcbiAgICAuZXEoXCJzbHVnXCIsIHNsdWcpXG4gICAgLm1heWJlU2luZ2xlKCk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBjb25mZXJlbmNlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cblxuICByZXR1cm4gZGF0YSBhcyBDb25mZXJlbmNlIHwgbnVsbDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbmZlcmVuY2VCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPENvbmZlcmVuY2UgfCBudWxsPiB7XG4gIGNvbnN0IGNsaWVudCA9IHJlcXVpcmVDbGllbnQoKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LmZyb20oXCJjb25mZXJlbmNlc1wiKS5zZWxlY3QoXCIqXCIpLmVxKFwiaWRcIiwgaWQpLm1heWJlU2luZ2xlKCk7XG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgY29uZmVyZW5jZSBieSBJRDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiBkYXRhIGFzIENvbmZlcmVuY2UgfCBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY291bnRSZWdpc3RyYXRpb25zKGNvbmZlcmVuY2VJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgY2xpZW50ID0gcmVxdWlyZUNsaWVudCgpO1xuICBjb25zdCB7IGNvdW50LCBlcnJvciB9ID0gYXdhaXQgY2xpZW50XG4gICAgLmZyb20oXCJyZWdpc3RyYXRpb25zXCIpXG4gICAgLnNlbGVjdChcIipcIiwgeyBoZWFkOiB0cnVlLCBjb3VudDogXCJleGFjdFwiIH0pXG4gICAgLmVxKFwiY29uZmVyZW5jZV9pZFwiLCBjb25mZXJlbmNlSWQpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNvdW50IHJlZ2lzdHJhdGlvbnM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuXG4gICAgcmV0dXJuIGNvdW50ID8/IDA7XG5cbiAgfVxuXG4gIFxuXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWdpc3RyYXRpb25CeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlZ2lzdHJhdGlvblJvdyB8IG51bGw+IHtcblxuICAgIGNvbnN0IGNsaWVudCA9IHJlcXVpcmVDbGllbnQoKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGNsaWVudC5mcm9tKFwicmVnaXN0cmF0aW9uc1wiKS5zZWxlY3QoXCIqXCIpLmVxKFwiaWRcIiwgaWQpLnNpbmdsZSgpO1xuXG4gIFxuXG4gICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09IFwiUEdSU1QxMTZcIikgeyAvLyBQR1JTVDExNiA9IDAgcm93c1xuXG4gICAgICBjb25zb2xlLmVycm9yKFwiREIgRXJyb3IgaW4gZ2V0UmVnaXN0cmF0aW9uQnlJZDpcIiwgZXJyb3IpO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHJlZ2lzdHJhdGlvbiBieSBJRDogJHtlcnJvci5tZXNzYWdlfWApO1xuXG4gICAgfVxuXG4gIFxuXG4gICAgcmV0dXJuIGRhdGEgYXMgUmVnaXN0cmF0aW9uUm93IHwgbnVsbDtcblxuICB9XG5cbiAgXG5cbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RSZWdpc3RyYXRpb25zKHBhcmFtczoge1xuXG4gICAgY29uZmVyZW5jZUlkOiBzdHJpbmc7XG5cbiAgICBzZWFyY2g/OiBzdHJpbmc7XG5cbiAgICBsaW1pdD86IG51bWJlcjtcblxuICB9KTogUHJvbWlzZTxSZWdpc3RyYXRpb25Sb3dbXT4ge1xuXG4gICAgY29uc3QgY2xpZW50ID0gcmVxdWlyZUNsaWVudCgpO1xuXG4gICAgbGV0IHF1ZXJ5ID0gY2xpZW50XG5cbiAgICAgIC5mcm9tKFwicmVnaXN0cmF0aW9uc1wiKVxuXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuXG4gICAgICAuZXEoXCJjb25mZXJlbmNlX2lkXCIsIHBhcmFtcy5jb25mZXJlbmNlSWQpXG5cbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gIFxuXG4gICAgaWYgKHBhcmFtcy5zZWFyY2gpIHtcblxuICAgICAgY29uc3QgdGVybSA9IGAlJHtwYXJhbXMuc2VhcmNoLnJlcGxhY2UoLyAvZywgXCIlXCIpfSVgO1xuXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBmdWxsX25hbWUuaWxpa2UuJHt0ZXJtfSxlbWFpbC5pbGlrZS4ke3Rlcm19YCk7XG5cbiAgICB9XG5cbiAgXG5cbiAgICBpZiAocGFyYW1zLmxpbWl0KSB7XG5cbiAgICAgIHF1ZXJ5ID0gcXVlcnkubGltaXQocGFyYW1zLmxpbWl0KTtcblxuICAgIH1cblxuICBcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuXG4gICAgaWYgKGVycm9yKSB7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgcmVnaXN0cmF0aW9uczogJHtlcnJvci5tZXNzYWdlfWApO1xuXG4gICAgfVxuXG4gICAgICAgIHJldHVybiAoZGF0YSBhcyBSZWdpc3RyYXRpb25Sb3dbXSkgPz8gW107XG5cbiAgICB9XG5cbiAgICBcblxuICAgIGV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDaGVja0luU3RhdHVzKGNoZWNrSW5zOiB7IHJlZ2lzdHJhdGlvbklkOiBzdHJpbmcsIHNjYW5uZWRBdDogc3RyaW5nIH1bXSk6IFByb21pc2U8bnVtYmVyPiB7XG5cbiAgICAgICAgY29uc3QgY2xpZW50ID0gcmVxdWlyZUNsaWVudCgpO1xuXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGNsaWVudC5ycGMoJ2J1bGtfdXBkYXRlX2NoZWNraW5zJywge1xuXG4gICAgICAgICAgICBwYXlsb2FkOiBjaGVja0luc1xuXG4gICAgICAgIH0pO1xuXG4gICAgXG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSUEMgRXJyb3IgaW4gdXBkYXRlQ2hlY2tJblN0YXR1czpcIiwgZXJyb3IpO1xuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBidWxrIHVwZGF0ZSBjaGVjay1pbnM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGEgPz8gMDtcblxuICAgIH1cblxuICAgIFxuXG4gICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJDT05GRVJFTkNFX1NMVUciLCJTVVBBQkFTRV9TRVJWSUNFX0tFWSIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQ2xpZW50IiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsInJlcXVpcmVDbGllbnQiLCJFcnJvciIsImdldFJlZ2lzdHJhdGlvbkJ5RW1haWwiLCJlbWFpbCIsImNvbmZlcmVuY2VJZCIsImNsaWVudCIsIm5vcm1hbGl6ZWRFbWFpbCIsInRvTG93ZXJDYXNlIiwidHJpbSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm1heWJlU2luZ2xlIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjcmVhdGVSZWdpc3RyYXRpb24iLCJwYXJhbXMiLCJpbnNlcnQiLCJpZCIsImNvbmZlcmVuY2VfaWQiLCJmdWxsX25hbWUiLCJmdWxsTmFtZSIsInBob25lIiwiaW5zdGl0dXRpb24iLCJjYXRlZ29yeSIsImZlZV9hbW91bnQiLCJmZWVBbW91bnQiLCJjdXJyZW5jeSIsInFyX3Rva2VuIiwicXJUb2tlbiIsInNpbmdsZSIsImdldENvbmZlcmVuY2VCeVNsdWciLCJzbHVnIiwiZ2V0Q29uZmVyZW5jZUJ5SWQiLCJjb3VudFJlZ2lzdHJhdGlvbnMiLCJjb3VudCIsImhlYWQiLCJnZXRSZWdpc3RyYXRpb25CeUlkIiwiY29kZSIsImxpc3RSZWdpc3RyYXRpb25zIiwicXVlcnkiLCJvcmRlciIsImFzY2VuZGluZyIsInNlYXJjaCIsInRlcm0iLCJyZXBsYWNlIiwib3IiLCJsaW1pdCIsInVwZGF0ZUNoZWNrSW5TdGF0dXMiLCJjaGVja0lucyIsInJwYyIsInBheWxvYWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/shared/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateInMemoryKeyPair: () => (/* reexport safe */ _jwt__WEBPACK_IMPORTED_MODULE_0__.generateInMemoryKeyPair),\n/* harmony export */   loadPrivateKey: () => (/* reexport safe */ _jwt__WEBPACK_IMPORTED_MODULE_0__.loadPrivateKey),\n/* harmony export */   loadPublicKey: () => (/* reexport safe */ _jwt__WEBPACK_IMPORTED_MODULE_0__.loadPublicKey),\n/* harmony export */   signRegistrationToken: () => (/* reexport safe */ _jwt__WEBPACK_IMPORTED_MODULE_0__.signRegistrationToken),\n/* harmony export */   verifyRegistrationToken: () => (/* reexport safe */ _jwt__WEBPACK_IMPORTED_MODULE_0__.verifyRegistrationToken)\n/* harmony export */ });\n/* harmony import */ var _jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jwt */ \"(rsc)/../../packages/shared/src/jwt.ts\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy9pbmRleC50cz84NjZhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2p3dFwiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/index.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/jwt.ts":
/*!****************************************!*\
  !*** ../../packages/shared/src/jwt.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateInMemoryKeyPair: () => (/* binding */ generateInMemoryKeyPair),\n/* harmony export */   loadPrivateKey: () => (/* binding */ loadPrivateKey),\n/* harmony export */   loadPublicKey: () => (/* binding */ loadPublicKey),\n/* harmony export */   signRegistrationToken: () => (/* binding */ signRegistrationToken),\n/* harmony export */   verifyRegistrationToken: () => (/* binding */ verifyRegistrationToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/../../.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/../../.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/../../.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/../../.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/key/generate_key_pair.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/../../.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/key/export.js\");\n\nasync function signRegistrationToken(payload, privateKeyPem) {\n    const { key, generated, publicKeyPem } = await loadPrivateKey(privateKeyPem);\n    const issuedAt = payload.iat ?? Math.floor(Date.now() / 1000);\n    const token = await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT({\n        name: payload.name,\n        cat: payload.cat,\n        conf: payload.conf,\n        fee: payload.fee,\n        cur: payload.cur\n    }).setProtectedHeader({\n        alg: \"RS256\"\n    }).setSubject(payload.sub).setIssuedAt(issuedAt).sign(key);\n    return {\n        token,\n        generated,\n        publicKeyPem\n    };\n}\nasync function verifyRegistrationToken(token, publicKeyPem) {\n    const { key } = await loadPublicKey(publicKeyPem);\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, key, {\n        algorithms: [\n            \"RS256\"\n        ]\n    });\n    return {\n        sub: payload.sub ?? \"\",\n        name: payload.name,\n        cat: payload.cat,\n        conf: payload.conf,\n        fee: Number(payload.fee),\n        cur: payload.cur,\n        iat: payload.iat\n    };\n}\nasync function loadPrivateKey(privateKeyPem) {\n    if (privateKeyPem) {\n        const key = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.importPKCS8)(privateKeyPem, \"RS256\");\n        return {\n            key,\n            generated: false\n        };\n    }\n    const generatedPair = await generateInMemoryKeyPair();\n    return {\n        key: generatedPair.privateKey,\n        generated: true,\n        privateKeyPem: generatedPair.privateKeyPem,\n        publicKeyPem: generatedPair.publicKeyPem\n    };\n}\nasync function loadPublicKey(publicKeyPem) {\n    const key = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.importSPKI)(publicKeyPem, \"RS256\");\n    return {\n        key,\n        generated: false,\n        publicKeyPem\n    };\n}\nasync function generateInMemoryKeyPair() {\n    const { privateKey, publicKey } = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.generateKeyPair)(\"RS256\");\n    const privateKeyPem = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.exportPKCS8)(privateKey);\n    const publicKeyPem = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.exportSPKI)(publicKey);\n    return {\n        privateKey,\n        publicKey,\n        privateKeyPem,\n        publicKeyPem\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy9qd3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVNjO0FBMkJQLGVBQWVPLHNCQUNwQkMsT0FBaUMsRUFDakNDLGFBQXNCO0lBRXRCLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxTQUFTLEVBQUVDLFlBQVksRUFBRSxHQUFHLE1BQU1DLGVBQWVKO0lBQzlELE1BQU1LLFdBQVdOLFFBQVFPLEdBQUcsSUFBSUMsS0FBS0MsS0FBSyxDQUFDQyxLQUFLQyxHQUFHLEtBQUs7SUFFeEQsTUFBTUMsUUFBUSxNQUFNLElBQUlkLHlDQUFPQSxDQUFDO1FBQzlCZSxNQUFNYixRQUFRYSxJQUFJO1FBQ2xCQyxLQUFLZCxRQUFRYyxHQUFHO1FBQ2hCQyxNQUFNZixRQUFRZSxJQUFJO1FBQ2xCQyxLQUFLaEIsUUFBUWdCLEdBQUc7UUFDaEJDLEtBQUtqQixRQUFRaUIsR0FBRztJQUNsQixHQUNHQyxrQkFBa0IsQ0FBQztRQUFFQyxLQUFLO0lBQVEsR0FDbENDLFVBQVUsQ0FBQ3BCLFFBQVFxQixHQUFHLEVBQ3RCQyxXQUFXLENBQUNoQixVQUNaaUIsSUFBSSxDQUFDckI7SUFFUixPQUFPO1FBQUVVO1FBQU9UO1FBQVdDO0lBQWE7QUFDMUM7QUFFTyxlQUFlb0Isd0JBQ3BCWixLQUFhLEVBQ2JSLFlBQW9CO0lBRXBCLE1BQU0sRUFBRUYsR0FBRyxFQUFFLEdBQUcsTUFBTXVCLGNBQWNyQjtJQUNwQyxNQUFNLEVBQUVKLE9BQU8sRUFBRSxHQUFHLE1BQU1ILCtDQUFTQSxDQUFDZSxPQUFPVixLQUFjO1FBQ3ZEd0IsWUFBWTtZQUFDO1NBQVE7SUFDdkI7SUFFQSxPQUFPO1FBQ0xMLEtBQUtyQixRQUFRcUIsR0FBRyxJQUFJO1FBQ3BCUixNQUFNYixRQUFRYSxJQUFJO1FBQ2xCQyxLQUFLZCxRQUFRYyxHQUFHO1FBQ2hCQyxNQUFNZixRQUFRZSxJQUFJO1FBQ2xCQyxLQUFLVyxPQUFPM0IsUUFBUWdCLEdBQUc7UUFDdkJDLEtBQUtqQixRQUFRaUIsR0FBRztRQUNoQlYsS0FBS1AsUUFBUU8sR0FBRztJQUNsQjtBQUNGO0FBRU8sZUFBZUYsZUFBZUosYUFBc0I7SUFDekQsSUFBSUEsZUFBZTtRQUNqQixNQUFNQyxNQUFNLE1BQU1QLGlEQUFXQSxDQUFDTSxlQUFlO1FBQzdDLE9BQU87WUFBRUM7WUFBS0MsV0FBVztRQUFNO0lBQ2pDO0lBRUEsTUFBTXlCLGdCQUFnQixNQUFNQztJQUM1QixPQUFPO1FBQ0wzQixLQUFLMEIsY0FBY0UsVUFBVTtRQUM3QjNCLFdBQVc7UUFDWEYsZUFBZTJCLGNBQWMzQixhQUFhO1FBQzFDRyxjQUFjd0IsY0FBY3hCLFlBQVk7SUFDMUM7QUFDRjtBQUVPLGVBQWVxQixjQUFjckIsWUFBb0I7SUFDdEQsTUFBTUYsTUFBTSxNQUFNTixnREFBVUEsQ0FBQ1EsY0FBYztJQUMzQyxPQUFPO1FBQUVGO1FBQUtDLFdBQVc7UUFBT0M7SUFBYTtBQUMvQztBQUVPLGVBQWV5QjtJQU1wQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsU0FBUyxFQUFFLEdBQUcsTUFBTXJDLHFEQUFlQSxDQUFDO0lBQ3hELE1BQU1PLGdCQUFnQixNQUFNVCxpREFBV0EsQ0FBQ3NDO0lBQ3hDLE1BQU0xQixlQUFlLE1BQU1YLGdEQUFVQSxDQUFDc0M7SUFFdEMsT0FBTztRQUFFRDtRQUFZQztRQUFXOUI7UUFBZUc7SUFBYTtBQUM5RCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uLi8uLi9wYWNrYWdlcy9zaGFyZWQvc3JjL2p3dC50cz82ZWY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGV4cG9ydFBLQ1M4LFxuICBleHBvcnRTUEtJLFxuICBnZW5lcmF0ZUtleVBhaXIsXG4gIGltcG9ydFBLQ1M4LFxuICBpbXBvcnRTUEtJLFxuICBqd3RWZXJpZnksXG4gIFNpZ25KV1QsXG4gIHR5cGUgS2V5TGlrZVxufSBmcm9tIFwiam9zZVwiO1xuXG5leHBvcnQgdHlwZSBSZWdpc3RyYXRpb25DYXRlZ29yeSA9IFwibWVtYmVyXCIgfCBcIm5vbl9tZW1iZXJcIiB8IFwic3R1ZGVudFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdHJhdGlvblRva2VuUGF5bG9hZCB7XG4gIHN1Yjogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNhdDogUmVnaXN0cmF0aW9uQ2F0ZWdvcnk7XG4gIGNvbmY6IHN0cmluZztcbiAgZmVlOiBudW1iZXI7XG4gIGN1cjogc3RyaW5nO1xuICBpYXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZGVkUHJpdmF0ZUtleSB7XG4gIGtleTogdW5rbm93bjtcbiAgZ2VuZXJhdGVkOiBib29sZWFuO1xuICBwcml2YXRlS2V5UGVtPzogc3RyaW5nO1xuICBwdWJsaWNLZXlQZW0/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZGVkUHVibGljS2V5IHtcbiAga2V5OiB1bmtub3duO1xuICBnZW5lcmF0ZWQ6IGJvb2xlYW47XG4gIHB1YmxpY0tleVBlbT86IHN0cmluZztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25SZWdpc3RyYXRpb25Ub2tlbihcbiAgcGF5bG9hZDogUmVnaXN0cmF0aW9uVG9rZW5QYXlsb2FkLFxuICBwcml2YXRlS2V5UGVtPzogc3RyaW5nXG4pOiBQcm9taXNlPHsgdG9rZW46IHN0cmluZzsgZ2VuZXJhdGVkOiBib29sZWFuOyBwdWJsaWNLZXlQZW0/OiBzdHJpbmcgfT4ge1xuICBjb25zdCB7IGtleSwgZ2VuZXJhdGVkLCBwdWJsaWNLZXlQZW0gfSA9IGF3YWl0IGxvYWRQcml2YXRlS2V5KHByaXZhdGVLZXlQZW0pO1xuICBjb25zdCBpc3N1ZWRBdCA9IHBheWxvYWQuaWF0ID8/IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuXG4gIGNvbnN0IHRva2VuID0gYXdhaXQgbmV3IFNpZ25KV1Qoe1xuICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICBjYXQ6IHBheWxvYWQuY2F0LFxuICAgIGNvbmY6IHBheWxvYWQuY29uZixcbiAgICBmZWU6IHBheWxvYWQuZmVlLFxuICAgIGN1cjogcGF5bG9hZC5jdXJcbiAgfSlcbiAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiBcIlJTMjU2XCIgfSlcbiAgICAuc2V0U3ViamVjdChwYXlsb2FkLnN1YilcbiAgICAuc2V0SXNzdWVkQXQoaXNzdWVkQXQpXG4gICAgLnNpZ24oa2V5IGFzIG5ldmVyKTtcblxuICByZXR1cm4geyB0b2tlbiwgZ2VuZXJhdGVkLCBwdWJsaWNLZXlQZW0gfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVJlZ2lzdHJhdGlvblRva2VuKFxuICB0b2tlbjogc3RyaW5nLFxuICBwdWJsaWNLZXlQZW06IHN0cmluZ1xuKTogUHJvbWlzZTxSZWdpc3RyYXRpb25Ub2tlblBheWxvYWQ+IHtcbiAgY29uc3QgeyBrZXkgfSA9IGF3YWl0IGxvYWRQdWJsaWNLZXkocHVibGljS2V5UGVtKTtcbiAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIGtleSBhcyBuZXZlciwge1xuICAgIGFsZ29yaXRobXM6IFtcIlJTMjU2XCJdXG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgc3ViOiBwYXlsb2FkLnN1YiA/PyBcIlwiLFxuICAgIG5hbWU6IHBheWxvYWQubmFtZSBhcyBzdHJpbmcsXG4gICAgY2F0OiBwYXlsb2FkLmNhdCBhcyBSZWdpc3RyYXRpb25DYXRlZ29yeSxcbiAgICBjb25mOiBwYXlsb2FkLmNvbmYgYXMgc3RyaW5nLFxuICAgIGZlZTogTnVtYmVyKHBheWxvYWQuZmVlKSxcbiAgICBjdXI6IHBheWxvYWQuY3VyIGFzIHN0cmluZyxcbiAgICBpYXQ6IHBheWxvYWQuaWF0XG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkUHJpdmF0ZUtleShwcml2YXRlS2V5UGVtPzogc3RyaW5nKTogUHJvbWlzZTxMb2FkZWRQcml2YXRlS2V5PiB7XG4gIGlmIChwcml2YXRlS2V5UGVtKSB7XG4gICAgY29uc3Qga2V5ID0gYXdhaXQgaW1wb3J0UEtDUzgocHJpdmF0ZUtleVBlbSwgXCJSUzI1NlwiKTtcbiAgICByZXR1cm4geyBrZXksIGdlbmVyYXRlZDogZmFsc2UgfTtcbiAgfVxuXG4gIGNvbnN0IGdlbmVyYXRlZFBhaXIgPSBhd2FpdCBnZW5lcmF0ZUluTWVtb3J5S2V5UGFpcigpO1xuICByZXR1cm4ge1xuICAgIGtleTogZ2VuZXJhdGVkUGFpci5wcml2YXRlS2V5LFxuICAgIGdlbmVyYXRlZDogdHJ1ZSxcbiAgICBwcml2YXRlS2V5UGVtOiBnZW5lcmF0ZWRQYWlyLnByaXZhdGVLZXlQZW0sXG4gICAgcHVibGljS2V5UGVtOiBnZW5lcmF0ZWRQYWlyLnB1YmxpY0tleVBlbVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFB1YmxpY0tleShwdWJsaWNLZXlQZW06IHN0cmluZyk6IFByb21pc2U8TG9hZGVkUHVibGljS2V5PiB7XG4gIGNvbnN0IGtleSA9IGF3YWl0IGltcG9ydFNQS0kocHVibGljS2V5UGVtLCBcIlJTMjU2XCIpO1xuICByZXR1cm4geyBrZXksIGdlbmVyYXRlZDogZmFsc2UsIHB1YmxpY0tleVBlbSB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVJbk1lbW9yeUtleVBhaXIoKTogUHJvbWlzZTx7XG4gIHByaXZhdGVLZXk6IEtleUxpa2U7XG4gIHB1YmxpY0tleTogS2V5TGlrZTtcbiAgcHJpdmF0ZUtleVBlbTogc3RyaW5nO1xuICBwdWJsaWNLZXlQZW06IHN0cmluZztcbn0+IHtcbiAgY29uc3QgeyBwcml2YXRlS2V5LCBwdWJsaWNLZXkgfSA9IGF3YWl0IGdlbmVyYXRlS2V5UGFpcihcIlJTMjU2XCIpO1xuICBjb25zdCBwcml2YXRlS2V5UGVtID0gYXdhaXQgZXhwb3J0UEtDUzgocHJpdmF0ZUtleSk7XG4gIGNvbnN0IHB1YmxpY0tleVBlbSA9IGF3YWl0IGV4cG9ydFNQS0kocHVibGljS2V5KTtcblxuICByZXR1cm4geyBwcml2YXRlS2V5LCBwdWJsaWNLZXksIHByaXZhdGVLZXlQZW0sIHB1YmxpY0tleVBlbSB9O1xufVxuIl0sIm5hbWVzIjpbImV4cG9ydFBLQ1M4IiwiZXhwb3J0U1BLSSIsImdlbmVyYXRlS2V5UGFpciIsImltcG9ydFBLQ1M4IiwiaW1wb3J0U1BLSSIsImp3dFZlcmlmeSIsIlNpZ25KV1QiLCJzaWduUmVnaXN0cmF0aW9uVG9rZW4iLCJwYXlsb2FkIiwicHJpdmF0ZUtleVBlbSIsImtleSIsImdlbmVyYXRlZCIsInB1YmxpY0tleVBlbSIsImxvYWRQcml2YXRlS2V5IiwiaXNzdWVkQXQiLCJpYXQiLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwidG9rZW4iLCJuYW1lIiwiY2F0IiwiY29uZiIsImZlZSIsImN1ciIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldFN1YmplY3QiLCJzdWIiLCJzZXRJc3N1ZWRBdCIsInNpZ24iLCJ2ZXJpZnlSZWdpc3RyYXRpb25Ub2tlbiIsImxvYWRQdWJsaWNLZXkiLCJhbGdvcml0aG1zIiwiTnVtYmVyIiwiZ2VuZXJhdGVkUGFpciIsImdlbmVyYXRlSW5NZW1vcnlLZXlQYWlyIiwicHJpdmF0ZUtleSIsInB1YmxpY0tleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/jwt.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/@supabase","vendor-chunks/zod","vendor-chunks/qrcode","vendor-chunks/pngjs","vendor-chunks/dijkstrajs","vendor-chunks/jose","vendor-chunks/resend"], () => (__webpack_exec__("(rsc)/../../.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fregister%2Froute&page=%2Fapi%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fregister%2Froute.ts&appDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farbenlila%2Fdevelopment%2Fshfmk-association%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();