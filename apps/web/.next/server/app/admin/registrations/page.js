(()=>{var e={};e.id=438,e.ids=[438],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(3708),s(7889),s(9948);var r=s(1926),n=s(6546),a=s(8713),i=s.n(a),l=s(8606),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["registrations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3708)),"/Users/arbenlila/development/shfmk-association/apps/web/app/admin/registrations/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7889)),"/Users/arbenlila/development/shfmk-association/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9948,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/arbenlila/development/shfmk-association/apps/web/app/admin/registrations/page.tsx"],m="/admin/registrations/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/registrations/page",pathname:"/admin/registrations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7943:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9800,23)),Promise.resolve().then(s.t.bind(s,9474,23)),Promise.resolve().then(s.t.bind(s,9884,23)),Promise.resolve().then(s.t.bind(s,33,23)),Promise.resolve().then(s.t.bind(s,5681,23)),Promise.resolve().then(s.t.bind(s,1616,23))},7094:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4696,23)),Promise.resolve().then(s.t.bind(s,5565,23))},9735:(e,t,s)=>{Promise.resolve().then(s.bind(s,749))},749:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5542),n=s(1320);function a(){let[e,t]=(0,n.useState)(""),[s,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(null),[o,d]=(0,n.useState)("idle"),[c,m]=(0,n.useState)(null),[h,u]=(0,n.useState)("");async function x(e,t){d("loading"),m(null);try{let s=new URL("/api/admin/registrations",window.location.origin);t&&s.searchParams.set("q",t);let r=await fetch(s.toString(),{headers:{"x-admin-secret":e}}),n=await r.json();if(!r.ok)throw Error(n.error??"Failed to load registrations");a(n.registrations),l(n.conference),d("idle")}catch(e){d("error"),m(e.message)}}async function p(t){t.preventDefault(),window.localStorage.setItem("shfmk_admin_secret",e),await x(e,h)}async function g(){let t=new URL("/api/admin/registrations",window.location.origin);t.searchParams.set("format","csv"),h&&t.searchParams.set("q",h);let s=await fetch(t.toString(),{headers:{"x-admin-secret":e}}),r=await s.text();if(!s.ok){m(r);return}let n=new Blob([r],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="registrations.csv",a.click()}async function f(t){let s=await fetch("/api/admin/resend",{method:"POST",headers:{"Content-Type":"application/json","x-admin-secret":e},body:JSON.stringify({registrationId:t})});if(!s.ok){alert((await s.json()).error??"Failed to resend");return}alert("Resent!")}let j=(0,n.useMemo)(()=>s.reduce((e,t)=>e+Number(t.fee_amount),0),[s]);return e?(0,r.jsxs)("div",{className:"grid",style:{gap:16},children:[(0,r.jsxs)("header",{className:"grid",style:{gap:6},children:[r.jsx("span",{className:"pill",children:"Admin"}),r.jsx("h1",{style:{margin:0},children:"Registrations"}),i&&r.jsx("p",{style:{margin:0,color:"#cbd5e1"},children:i.name})]}),(0,r.jsxs)("div",{className:"card grid",style:{gap:12},children:[(0,r.jsxs)("div",{className:"actions",style:{justifyContent:"space-between"},children:[r.jsx("input",{className:"input",style:{flex:1},placeholder:"Search name or email",value:h,onChange:t=>{u(t.target.value),x(e,t.target.value)}}),r.jsx("button",{className:"btn secondary",type:"button",onClick:g,children:"Export CSV"})]}),"loading"===o&&r.jsx("div",{children:"Loading..."}),c&&r.jsx("div",{style:{color:"#fca5a5"},children:c}),r.jsx("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Fee"}),r.jsx("th",{children:"Registered"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{children:e.full_name}),r.jsx("td",{children:e.email}),r.jsx("td",{children:r.jsx("span",{className:"badge",children:e.category})}),(0,r.jsxs)("td",{children:[e.fee_amount," ",e.currency]}),r.jsx("td",{children:new Date(e.created_at).toLocaleString()}),r.jsx("td",{children:r.jsx("button",{className:"btn secondary",type:"button",onClick:()=>f(e.id),children:"Resend email"})})]},e.id))})]})}),(0,r.jsxs)("div",{style:{color:"#cbd5e1"},children:["Total registrations: ",r.jsx("strong",{children:s.length})," | Fees:"," ",r.jsx("strong",{children:j.toFixed(2)})]})]})]}):(0,r.jsxs)("div",{className:"card",style:{maxWidth:480,margin:"0 auto"},children:[r.jsx("h1",{style:{marginTop:0},children:"Admin access"}),(0,r.jsxs)("form",{onSubmit:p,className:"grid",style:{gap:12},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",htmlFor:"secret",children:"Shared secret"}),r.jsx("input",{id:"secret",className:"input",value:e,onChange:e=>t(e.target.value),placeholder:"Enter ADMIN_SECRET"})]}),r.jsx("button",{className:"btn",type:"submit",children:"Unlock"})]})]})}},3708:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var r=s(1387);let n=(0,r.createProxy)(String.raw`/Users/arbenlila/development/shfmk-association/apps/web/app/admin/registrations/page.tsx`),{__esModule:a,$$typeof:i}=n;n.default;let l=(0,r.createProxy)(String.raw`/Users/arbenlila/development/shfmk-association/apps/web/app/admin/registrations/page.tsx#default`)},7889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>d});var r=s(9038);s(4980);var n=s(7404),a=s(4057);function i(){return r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsxs)("div",{className:"container flex h-14 items-center",children:[(0,r.jsxs)("div",{className:"mr-4 hidden md:flex",children:[(0,r.jsxs)(n.default,{href:"/",className:"mr-6 flex items-center space-x-2",children:[r.jsx(a.default,{src:"/logo-shfk.png",width:32,height:32,alt:"SHFK Logo"}),r.jsx("span",{className:"hidden font-bold sm:inline-block",children:"SHFK"})]}),(0,r.jsxs)("nav",{className:"flex items-center space-x-6 text-sm font-medium",children:[r.jsx(n.default,{href:"/",children:"Ballina"}),r.jsx(n.default,{href:"/konferenca",children:"Konferenca"}),r.jsx(n.default,{href:"/rreth-nesh",children:"Rreth nesh"}),r.jsx(n.default,{href:"/kontakt",children:"Kontakt"})]})]}),r.jsx("div",{className:"flex flex-1 items-center justify-between space-x-2 md:justify-end",children:r.jsx("nav",{className:"flex items-center",children:r.jsx(n.default,{href:"/conference/register",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2",children:"Regjistrohu"})})})]})})}function l(){return r.jsx("footer",{className:"py-6 md:px-8 md:py-0",children:r.jsx("div",{className:"container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row",children:(0,r.jsxs)("p",{className:"text-center text-sm leading-loose text-muted-foreground md:text-left",children:["\xa9 ",new Date().getFullYear()," Shoqata Farmaceutike e Kosov\xebs. T\xeb gjitha t\xeb drejtat e rezervuara."]})})})}var o=s(9584);let d={title:"SHFMK Konferenca",description:"Shoqata Farmaceutike e Kosov\xebs - Regjistrimi n\xeb konferenc\xeb"};function c({children:e}){return r.jsx("html",{lang:"sq",children:(0,r.jsxs)("body",{className:(0,o.cn)("min-h-screen bg-background font-sans antialiased"),children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1",children:e}),r.jsx(l,{})]})})}},9584:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(3401),n=s(3993);function a(...e){return(0,n.m6)((0,r.W)(e))}},4980:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[809,309],()=>s(7927));module.exports=r})();